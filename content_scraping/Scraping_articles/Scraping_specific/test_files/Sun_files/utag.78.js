//tealium universal tag - utag.78 ut4.0.202409090936, Copyright 2024 Tealium.com Inc. All Rights Reserved.
try{(function(id,loader){var u={};utag.o[loader].sender[id]=u;if(utag===undefined){utag={};}if(utag.ut===undefined){utag.ut={};}if(utag.ut.loader===undefined){u.loader=function(o){var a,b,c,l;a=document;if(o.type==="iframe"){b=a.createElement("iframe");b.setAttribute("height","1");b.setAttribute("width","1");b.setAttribute("style","display:none");b.setAttribute("src",o.src);}else if(o.type==="img"){utag.DB("Attach img: "+o.src);b=new Image();b.src=o.src;return;}else{b=a.createElement("script");b.language="javascript";b.type="text/javascript";b.async=1;b.charset="utf-8";b.src=o.src;}if(o.id){b.id=o.id;}if(typeof o.cb==="function"){if(b.addEventListener){b.addEventListener("load",function(){o.cb();},false);}else{b.onreadystatechange=function(){if(this.readyState==="complete"||this.readyState==="loaded"){this.onreadystatechange=null;o.cb();}};}}l=o.loc||"head";c=a.getElementsByTagName(l)[0];if(c){utag.DB("Attach to "+l+": "+o.src);if(l==="script"){c.parentNode.insertBefore(b,c);}else{c.appendChild(b);}}};}else{u.loader=utag.ut.loader;}
u.ev={'view':1,'link':1};u.initialized=false;u.map={"nukpSendingMethod":"sendingMethod","nukpIncludeBlanks":"includeBlanks","nukpEndpoint":"endPoint","nukpLoggingRequired":"loggingRequired","nukpNetwork":"p.n","nukpPublication":"p.p","nukpPageUrl":"p.pu","page_name":"p.pn","article_id":"p.ai","article_name":"p.an","page_section_id":"p.seci","page_section":"p.sn","page_section_2_id":"p.ssi","page_section_2":"p.ssn","nukpReferrerUrl":"p.ru","previous_page_name":"p.ppn","customer_id":"p.ci","nukpCsId":"p.cs_id","nukpEventCategory":"p.ec","nukpEventAction":"p.ea","nukpEventLabel":"p.el","nukpEventValue":"p.ev","page_site_name":"p.d1","cp.utag_main_v_id":"p.d2","cp.utag_main_ses_id":"p.d3","user_time_zone":"p.d4","orientation":"p.d5","registration_type":"p.d6","time_timestamp":"p.d7","nuk_screen_info":"p.d8","nukpOsVersion":"p.d9","article_kicker_name":"p.d10","article_tag_name":"p.d11","widget_headline":"p.d12","widget_kicker":"p.d13","widget_tag":"p.d14","teaser_lead_text":"p.d15","teaser_image_url":"p.d16","media_id":"p.d17","media_type":"p.d18","media_name":"p.d19","media_player":"p.d20","media_duration":"p.d21","media_offset":"p.d22","media_milestone":"p.d23","media_segment":"p.d24","mp_code":"p.d25","pc_code":"p.d26","product_name":"p.d27","nukpUserInteractionName":"p.d28","nukpUserInteractionMethod":"p.d29","nukpUserInteractionAdd1":"p.d30","nukpUserInteractionAdd2":"p.d31","nukpUserInteractionAdd3":"p.d32","social_platform":"p.d33","internal_search_term":"p.d34","page_section_3_id":"p.d35","page_section_3":"p.d36","article_id_last_viewed":"p.d37","page_type":"p.d38","cms_original_publishing_site":"p.d39","nukpNonInteraction":"p.d40","article_author":"p.d41","page_tags":"p.d42","pageViewId":"p.pvi","article_name_latest":"p.d44","nukpAppVersion":"p.d45","cs_timestamp":"p.d46","nukpSessionNumber":"p.d47","sync_vis_id":"p.d48","media_position":"p.d49","media_show":"p.d50","optimizely_experiment_data":"p.d51","app_bundle_id":"p.d52","is_video_contains":"p.d53","tid_acs_cookie":"p.d59","article_topic_tags":"p.d60","optimizely_full_stack":"p.d61","tpw_exp_id_and_variant":"p.d62","uuid":"p.d63","consentFlags":"p.d65","article_publish_timestamp":"p.d66","parent_site":"p.d67","article_locked_status":"p.d68","propensity_user_type":"p.d69","nukpUserInteractionAdd4":"p.d70","nukpPageAdd1":"p.d71","nukpPageAdd2":"p.d72","nukpPageAdd3":"p.d73","nukpPageAdd4":"p.d74","question_type":"p.d75","app_uuid":"p.d76","tealium_vid":"p.d77","splash_teaser_name":"p.d78","teaser_image_visible":"p.d79","teaser_lead_text_visible":"p.d80","article_flag":"p.d81","article_template_name":"p.d82","widget_type":"p.d83","widget_section":"p.d84","module_id":"p.d85","tpw_views_remaining":"p.d86","tpw_views_allowed":"p.d87","tpw_zephr_status":"p.d88","nuk_referer":"p.d89","nukpAppUUID":"p.d90","all_access_reasons":"p.d91","slot_number":"p.d92","click_type":"p.d93","article_id_2":"p.d94","module_name":"p.d95","module_position":"p.d96","guid_uuid":"p.d97","third_party_id":"p.d98","customer_type":"p.d99","app_content_location":"p.d54","tealium_version_timestamp":"p.d100","checkout_type":"p.d101","checkout_flow":"p.d102","payment_type":"p.d103","connection_type":"p.d104","primary_l1":"p.d106","primary_l2":"p.d107","primary_l3":"p.d108","primary_l4":"p.d109","primary_l5":"p.d110","secondary_l1":"p.d111","secondary_l2":"p.d112","secondary_l3":"p.d113","secondary_l4":"p.d114","secondary_l5":"p.d115","article_placement_position":"p.d116","marketing_information":"p.d117","widget_position":"p.d118"};u.extend=[function(a,b){try{if(1){if(a&&a==="link"){if(b.event_navigation_name&&b.event_navigation_name.toLowerCase()==="sun edition:selection"){if(b.article_parent_name&&b.article_parent_name.toLowerCase().indexOf("sun edition:uk edition")>-1){return false;}}}
if(a&&a==="link"){if(b.event_navigation_name&&b.event_navigation_name.toLowerCase()==="guidance overlay : got it"){return false;}}
if(a&&a==='link'){if(b.event_navigation_name&&b.event_navigation_name.toLowerCase()==='user first scroll'){if((typeof b.page_section==='undefined')||(b.page_section.toLowerCase()!=='travel')){return false;}}}
if(a&&a==='link'){if(b.event_navigation_name&&b.event_navigation_name.toLowerCase()==='sticky:social share:display'){return false;}}
if(b.event_media_action&&b.event_media_action.toLowerCase()==="media play"){if(b.media_offset&&b.media_offset!="00:00:00"){return false;}}
if(b.event_media_action&&b.event_media_action.toLowerCase()==="media milestone"){if(b.media_milestone&&(b.media_milestone==="25"||b.media_milestone==="50"||b.media_milestone==="75")){if(!window.tealium_player_last_milestone_ga360){window.tealium_player_last_milestone_ga360="";}
if(!window.tealium_player_last_timestamp_ga360){window.tealium_player_last_timestamp_ga360="";}
var toReport=true;var N=2000;var myTime=new Date().getTime();if(b.media_milestone===window.tealium_player_last_milestone_ga360){if(window.tealium_player_last_timestamp_ga360!==""){if(myTime-window.tealium_player_last_timestamp_ga360<N){toReport=false;}}}else{window.tealium_player_last_milestone_ga360=b.media_milestone;}
window.tealium_player_last_timestamp_ga360=myTime;if(!toReport){return false;}}}
if(b.event_engagement_name&&b.event_engagement_name.toLowerCase()==="rail:show segment"){return false;}}}catch(e){utag.DB(e)}},function(a,b){try{if(1){if(b.customer_id){b.customer_id=b.customer_id.toUpperCase().replace('CPN:','');}
if(typeof b.is_registered_article=="boolean"){b.article_flag=b.is_registered_article;}}}catch(e){utag.DB(e)}},function(a,b){try{if(1){var inherit_function=function(varName){if(!b[varName]&&utag.data[varName]){b[varName]=utag.data[varName];}};if(a&&a==="link"){inherit_function('page_name');inherit_function('page_section');inherit_function('page_section_2');inherit_function('page_section_3');inherit_function('page_section_4');inherit_function('page_section_id');inherit_function('page_section_2_id');inherit_function('page_type');inherit_function('page_number');inherit_function('page_site_name');inherit_function('page_site_region');inherit_function('article_name');inherit_function('article_id');inherit_function('article_author');inherit_function('article_publish_timestamp');inherit_function('article_publish_date');inherit_function('article_publish_time_lapse');inherit_function('article_id_type');inherit_function('template_name');inherit_function('page_restrictions');inherit_function('page_tags');inherit_function('internal_search_term');inherit_function('internal_search_results');inherit_function('article_tag_name');inherit_function('article_publish_latest');inherit_function('article_name_latest');inherit_function('article_kicker_name');}}}catch(e){utag.DB(e)}},function(a,b){try{if(1){if(b["qp.ExternalDataReference"]&&b["qp.ExternalDataReference"]!==""){b.third_party_id="qualtrics : "+b["qp.ExternalDataReference"];}}}catch(e){utag.DB(e)}},function(a,b){try{if(1){if(a&&a==="link"){if(b.event_navigation_name&&b.event_navigation_name.toLowerCase().indexOf("recommended article")>-1&&b.guid_uuid&&b.guid_uuid!==""){b.nukpUserInteractionAdd3=b.guid_uuid;b.nukpUserInteractionAdd2=b.click_type;}}
if(b.event_engagement_action&&b.event_engagement_action.toLowerCase()==="engagement"){b.nukpUserInteractionName=b.event_engagement_name||"";b.nukpUserInteractionMethod=b.event_engagement_browsing_method||"";b.nukpUserInteractionAdd1=b.article_parent_name||"";if(a&&a==="link"){b.nukpEventCategory="user interactions";b.nukpEventAction=b.nukpUserInteractionName;b.nukpEventLabel=b.nukpUserInteractionAdd1;}}
if(b.event_navigation_action&&(b.event_navigation_action.toLowerCase()==="navigation"||b.event_navigation_action.toLowerCase()==="recommendation")){b.nukpUserInteractionName=b.event_navigation_name||"";b.nukpUserInteractionMethod=b.event_navigation_browsing_method||"";b.nukpUserInteractionAdd1=b.module_name||b.article_parent_name||"";b.nukpUserInteractionAdd2=b.article_parent_name_2||b.additional_details||"";if(a&&a==="link"){b.nukpEventCategory="user interactions";b.nukpEventAction=b.nukpUserInteractionName;b.nukpEventLabel=b.nukpUserInteractionAdd1;b.nukpUserInteractionAdd1=b.team||b.module_name||b.article_parent_name||"";b.nukpUserInteractionAdd4=b.score||"";b.nukpPageAdd2=b.players||"";}}
if(b.pod_event_type&&b.pod_event_type.toLowerCase()==="pod widget events"){if(b.pod_widget_type&&b.pod_widget_type.toLowerCase()==='carousel'){b.nukpUserInteractionName=b.pod_widget_event_name||"";if(b.pod_widget_id&&b.pod_widget_title&&b.pod_widget_is_clickable){b.nukpUserInteractionAdd1=b.pod_widget_id+'|'+b.pod_widget_title+'|'+b.pod_widget_is_clickable;}
if(b.pod_slide_position&&b.pod_slide_title&&b.pod_slide_url){b.nukpUserInteractionAdd2=b.pod_slide_position+'|'+b.pod_slide_title.toLowerCase()+'|'+b.pod_slide_url.toLowerCase();}
if(b.pod_total_slides){b.nukpUserInteractionAdd3=b.pod_total_slides.toString()||"";}
b.nukpEventCategory="pod widget events";b.nukpEventAction=b.nukpUserInteractionName;b.nukpEventLabel=b.pod_widget_type;}}
if(b.pod_event_type&&b.pod_event_type.toLowerCase()==="pod widget events"){if(b.pod_widget_type&&b.pod_widget_type.toLowerCase()==='accordion'){b.nukpUserInteractionName=b.pod_widget_event_name||"";if(b.pod_widget_id&&b.pod_widget_title&&b.pod_widget_is_clickable){b.nukpUserInteractionAdd1=b.pod_widget_id+'|'+b.pod_widget_title+'|'+b.pod_widget_is_clickable;}
if(b.pod_widget_row_count&&b.pod_widget_openrow_count){b.nukpUserInteractionAdd2=b.pod_widget_row_count.toString()+'|'+b.pod_widget_openrow_count.toString();}
if(b.pod_slide_url){b.nukpUserInteractionAdd3=b.pod_slide_url.toLowerCase();}
if(b.pod_widget_row_title&&b.pod_slide_position){b.nukpUserInteractionAdd4=b.pod_widget_row_title.toLowerCase()+'|'+b.pod_slide_position.toString();}
b.nukpEventCategory="pod widget events";b.nukpEventAction=b.nukpUserInteractionName;b.nukpEventLabel=b.pod_widget_type;}}
if(b.event_navigation_name&&b.event_navigation_name.toLowerCase()==="spot im : comment : complete"){b.nukpUserInteractionName="post comment";b.nukpUserInteractionMethod=b.event_navigation_browsing_method||"";if(a&&a==="link"){b.nukpEventCategory="user interactions";b.nukpEventAction="post comment";b.nukpEventLabel="";}}
if(b.event_navigation_name&&b.event_navigation_name.toLowerCase()==="spot im : comment : start"){b.nukpUserInteractionName="comment start";b.nukpUserInteractionMethod=b.event_navigation_browsing_method||"";if(a&&a==="link"){b.nukpEventCategory="user interactions";b.nukpEventAction="comment start";b.nukpEventLabel="";}}
if(a&&a==="link"&&b.event_social_action){b.nukpEventCategory="social share events";b.nukpEventAction=b.event_social_action.toLowerCase();}
if(a&&a==="link"&&b.event_media_action){b.nukpUserInteractionMethod=b.event_navigation_browsing_method||"";b.nukpEventCategory="media events";b.nukpEventAction=b.event_media_action.toLowerCase();b.nukpEventLabel=b.media_name||"";}
if(a&&a==="link"&&b.event_internal_search&&b.event_internal_search.toLowerCase()==="internal search submitted"){b.nukpEventCategory="internal search events";b.nukpEventAction="internal search submitted";b.nukpEventLabel=b.internal_search_term||"";}
if(a&&a==="link"&&b.error_name&&b.error_name.toLowerCase()==="error"){b.nukpEventCategory="error events";b.nukpEventAction=b.error_type||"";}
b.nukpExperimentName=b.event_experiment_name;if(b.event_navigation_name&&b.event_navigation_name=='splash teaser clicked'&&b.page_additional_details){b.nukpUserInteractionAdd3=b.page_additional_details;}
if(b.event_navigation_action&&b.event_navigation_action.toLowerCase()==="sectioning title"||b.event_navigation_action&&b.event_navigation_action.toLowerCase()==="view more sectioning button"){b.nukpUserInteractionName=b.event_navigation_action||"";b.nukpUserInteractionMethod=b.event_navigation_browsing_method||"";b.nukpUserInteractionAdd1=b.event_navigation_name||"";b.nukpUserInteractionAdd2=b.article_parent_name_2||"";if(a&&a==="link"){b.nukpEventCategory="user interactions";b.nukpEventAction=b.nukpUserInteractionName;b.nukpEventLabel=b.nukpUserInteractionAdd1;}}}}catch(e){utag.DB(e)}},function(a,b){try{if(1){if(a&&a==="link"){if(b.event_name&&b.event_name.toLowerCase()==="customexitlink"&&b.link_url&&b.link_url!==""){if(b.link_type&&b.link_type.toLowerCase()==="exit link"){var extractHostname=function(url){var h;if(url.indexOf("//")>-1){h=url.split('/')[2];}else{h=url.split('/')[0];}
h=h.split(':')[0];h=h.split('?')[0];return h;};var myDomain=extractHostname(b.link_url);b.nukpUserInteractionName="exit link";b.nukpUserInteractionMethod="click";b.nukpUserInteractionAdd1=myDomain;b.nukpEventCategory="user interactions";b.nukpEventAction="exit link";b.nukpEventLabel=myDomain;}
else{return false;}}}}}catch(e){utag.DB(e)}},function(a,b){try{if(1){function toType(obj){return({}).toString.call(obj).match(/\s([a-zA-Z]+)/)[1].toLowerCase();}
var lower_case_exclusions_master="customer_id,customer_id_type,customer_id_with_type,article_id,media_id,app_id,link_id,tealium_id,uuid,sc_visitor_id,sc_article_id,tealium_session_id,tealium_visitor_id,tealium_session_visitor_id,sc_user_agent,sc_url,experiment_id,experiment_variant,experiment_details,optimizely_experiment_data";var no_lower=lower_case_exclusions_master.split(',');var lower_case_cookies='true';var lower_case_qsps='true';for(var i=0;i<no_lower.length;i++){no_lower[i]=no_lower[i].trim();}
var no_flag={};for(varName in b){for(var i=0;i<no_lower.length;i++){if(varName!==no_lower[i]){no_flag[varName]=false;}else{no_flag[varName]=true;break;}}
if(no_flag[varName]!==true&&b[varName]){if(toType(b[varName])==='string'){if(varName.indexOf('cp.')===0){if(lower_case_cookies==='false'){continue;}else{var lower_case=true;}}else
if(varName.indexOf('qp.')===0){if(lower_case_qsps==='false'){continue;}else{var lower_case=true;}}else{var lower_case=true}
if(lower_case===true){b[varName]=b[varName].toLowerCase();}}
if(toType(b[varName])==='array'){for(var i=0;i<no_lower.length;i++){if(toType(b[varName][i])==='string'){b[varName][i]=b[varName][i].toLowerCase();}}}}}}}catch(e){utag.DB(e)}},function(a,b){try{if(1){if(a&&a==="link"){if((b.nukpUserInteractionMethod&&b.nukpUserInteractionMethod.toLowerCase()==="automated")||(b.nukpUserInteractionName&&b.nukpUserInteractionName==="user first scroll")||(b.nukpExperimentName&&b.nukpExperimentName.toLowerCase()==='experiment_data')){b.nukpNonInteraction="true";}else{b.nukpNonInteraction="false";}}}}catch(e){utag.DB(e)}},function(a,b){try{if(1){if(a&&a==='link'){if(typeof b.nukpEventAction!=='undefined'&&b.nukpEventAction!==''){var act=b.nukpEventAction.toString().toLowerCase(),lbl=((typeof b.nukpEventLabel!=='undefined')?b.nukpEventLabel.toString().toLowerCase():''),add2=((typeof b.nukpUserInteractionAdd2!=='undefined')?b.nukpUserInteractionAdd2.toString().toLowerCase():''),add3=((typeof b.nukpUserInteractionAdd3!=='undefined')?b.nukpUserInteractionAdd3.toString().toLowerCase():'');if(act.indexOf('article:hyperlink:')===0){lbl='link : '+act.replace('article:hyperlink:','');act='article : hyperlink : selection';}
else if(act.indexOf('recommended article :')===0){add2=lbl;if(act==='recommended article :'){lbl='';}
else{lbl=act.replace('recommended article : ','');}
act='recommended article : selection';}
else if(act.slice(-16)===' : article click'){add2='module : '+act.replace(' : article click','');act='read more module : selection';}
else if(act.indexOf('latest ')===0&&act.indexOf(' news article :')>-1){t=act.match(/^latest([^:]+)news article :(.+)/);if(t.length===3){add3=lbl;add2='module : '+t[1].trim();lbl=t[2].trim();act='latest news module : selection';}}
else if(act.indexOf('go to topic : breadcrumb : ')===0){lbl=act.replace('go to topic : breadcrumb : ','');act='go to topic : breadcrumb : selection';}
else if(act.indexOf('hamburger : navigation : option selected')===0){act=act.replace('hamburger : ','');}
else if(act.indexOf('hamburger : ')===0){lbl=act.replace('hamburger : ','');act='hamburger : selection';}
else if(act.indexOf('sim module : button click : ')===0){lbl='button click : '+act.replace('sim module : button click : ','');act='sim module : interaction';}
else if(act.indexOf('sim module : promo not served : ')===0){lbl='promo not served : '+act.replace('sim module : promo not served : ','');act='sim module : promo';}
else if(act.indexOf('sticky : top nav bar : ')===0){if(act!=='sticky : top nav bar : display'){lbl='nav bar : '+act.replace('sticky : top nav bar : ','');act='sticky : top nav bar : selection';}}
else if(act.indexOf('related stories article : ')===0){add2=lbl;lbl=act.replace('related stories article : ','');act='related stories module : selection';}
b.nukpEventAction=act.trim();b.nukpUserInteractionName=act.trim();b.nukpEventLabel=lbl.trim();b.nukpUserInteractionAdd1=lbl.trim();b.nukpUserInteractionAdd2=add2.trim();b.nukpUserInteractionAdd3=add3.trim();}}}}catch(e){utag.DB(e)}},function(a,b){try{if(1){b.nukpEndpoint='https://pac.newsdata.uk/track';if(b.tealium_environment&&b.tealium_environment.toLowerCase()==='prod'){b.nukpEndpoint='https://pac.thesun.co.uk/track';}
b.nukpNetwork='ngn';b.nukpPublication='thesun';b.nukpWebOrApp='web';b.nukpPageUrlDomain='';b.nukpSendingMethod='GET';b.nukpIncludeBlanks=false;b.nukpLoggingRequired=false;}}catch(e){utag.DB(e)}},function(a,b){try{if(1){if(typeof b.nukpWebOrApp!=='undefined'){b.nukpWebOrApp=b.nukpWebOrApp.toString().toLowerCase();b.user_time_zone='';try{b.user_time_zone=Intl.DateTimeFormat().resolvedOptions().timeZone;}
catch(exc){b.user_time_zone='time zone information not available';}
b.user_time_zone=b.user_time_zone.toLowerCase();try{b.nuk_screen_info='';if(b['dom.viewport_width']&&b['dom.viewport_height']){b.nuk_screen_info=''+b['dom.viewport_width']+'x'+b['dom.viewport_height']+'|';}
else{b.nuk_screen_info='na|';}
if(window.screen.width&&window.screen.height){b.nuk_screen_info+=window.screen.width+'x'+window.screen.height+'|';}
else{b.nuk_screen_info+='na|';}
if(window.devicePixelRatio){b.nuk_screen_info+=window.devicePixelRatio;}
else{b.nuk_screen_info+='na';}}catch(e){b.nuk_screen_info='';}
if(b.nukpWebOrApp==='web'){b.nukpPageUrl=(typeof b['dom.url']!=='undefined'?b['dom.url']:'');b.nukpReferrerUrl=(typeof b['dom.referrer']!=='undefined'?b['dom.referrer']:'');b.nukpCsId=(typeof b['cp.utag_main_v_id']!=='undefined'?b['cp.utag_main_v_id']:'');b.nukpSessionNumber=(typeof b['cp.utag_main__sn']!=='undefined'?b['cp.utag_main__sn']:'');b.acs_cookie='';if(typeof b['cp.acs_tnl']!=='undefined'){b.acs_cookie=b['cp.acs_tnl'];}else if(typeof b['cp.acs_ngn']!=='undefined'){b.acs_cookie=b['cp.acs_ngn'];}else if(typeof b['cp.acs_wls']!=='undefined'){b.acs_cookie=b['cp.acs_wls'];}else if(typeof b['cp.acs_tls']!=='undefined'){b.acs_cookie=b['cp.acs_tls'];}
try{b.sync_vis_id=document.cookie.match(/rc_id2=(.+?);/)[1].split('.').slice(-2).join(".");}catch(e){b.sync_vis_id='';}
if(a&&a==='link'){try{if(b.nuk_screen_info){b.nuk_screen_info=b.nuk_screen_info+'|'+Math.round(window.scrollY/document.body.clientHeight*100)+'%';}}
catch(e){}}
if(window.pageViewId){b.pageViewId=window.pageViewId;}}
else if(b.nukpWebOrApp==='app'){b.nukpPageUrl='';if(typeof b.nukpPageUrlDomain!=='undefined'){b.nukpPageUrl=b.nukpPageUrlDomain;var pn=(b.page_name?b.page_name.toLowerCase():"page name not set");pn="/"+pn.replace(/\s*:\s*/,"/").replace(/\s/g,"-").replace(/['\&\+\%\$\£\"\!\*\(\)\^\=\‘\’]/g,"").replace(/[\,\.\;]/g,"-");b.nukpPageUrl+=pn;if(b.utm_content){b.nukpPageUrl.indexOf("?")<0?b.nukpPageUrl=b.nukpPageUrl+"?":b.nukpPageUrl;b.nukpPageUrl=b.nukpPageUrl+"&utm_content="+b.utm_content;}
if(b.utm_medium){b.nukpPageUrl.indexOf("?")<0?b.nukpPageUrl=b.nukpPageUrl+"?":b.nukpPageUrl;b.nukpPageUrl=b.nukpPageUrl+"&utm_medium="+b.utm_medium;}
if(b.utm_source){b.nukpPageUrl.indexOf("?")<0?b.nukpPageUrl=b.nukpPageUrl+"?":b.nukpPageUrl;b.nukpPageUrl=b.nukpPageUrl+"&utm_source="+b.utm_source;}}
if(b.app_version){b.nukpAppVersion=b.app_version;}
b.nukpReferrerUrl='';b.nukpCsId='';b.nukpSessionNumber='';b.sync_vis_id='';}
b.tid_acs_cookie='';try{if(typeof b.acs_cookie!=='undefined'&&b.acs_cookie.toString()!==''){if(b.acs_cookie.toLowerCase().indexOf('tid=')>-1){b.tid_acs_cookie=b.acs_cookie.split('tid=')[1].split('&')[0];}}}
catch(e){}}}}catch(e){utag.DB(e)}},function(a,b){utag.ut.md5=function(t,n){var r;if("undefined"!=typeof window&&window.crypto&&(r=window.crypto),!r&&"undefined"!=typeof window&&window.msCrypto&&(r=window.msCrypto),!r&&"undefined"!=typeof global&&global.crypto&&(r=global.crypto),!r&&"function"==typeof require)try{r=require("crypto")}catch(t){}var e=function(){if(r){if("function"==typeof r.getRandomValues)try{return r.getRandomValues(new Uint32Array(1))[0]}catch(t){}if("function"==typeof r.randomBytes)try{return r.randomBytes(4).readInt32LE()}catch(t){}}throw new Error("Native crypto module could not be used to get secure random number.")},i=Object.create||function(){function t(){}return function(n){var r;return t.prototype=n,r=new t,t.prototype=null,r}}(),o={},s=o.lib={},a=s.Base={extend:function(t){var n=i(this);return t&&n.mixIn(t),n.hasOwnProperty("init")&&this.init!==n.init||(n.init=function(){n.$super.init.apply(this,arguments)}),n.init.prototype=n,n.$super=this,n},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var n in t)t.hasOwnProperty(n)&&(this[n]=t[n]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},c=s.WordArray=a.extend({init:function(t,n){t=this.words=t||[],this.sigBytes=null!=n?n:4*t.length},toString:function(t){return(t||f).stringify(this)},concat:function(t){var n=this.words,r=t.words,e=this.sigBytes,i=t.sigBytes;if(this.clamp(),e%4)for(var o=0;o<i;o++){var s=r[o>>>2]>>>24-o%4*8&255;n[e+o>>>2]|=s<<24-(e+o)%4*8}else for(o=0;o<i;o+=4)n[e+o>>>2]=r[o>>>2];return this.sigBytes+=i,this},clamp:function(){var n=this.words,r=this.sigBytes;n[r>>>2]&=4294967295<<32-r%4*8,n.length=t.ceil(r/4)},clone:function(){var t=a.clone.call(this);return t.words=this.words.slice(0),t},random:function(t){for(var n=[],r=0;r<t;r+=4)n.push(e());return new c.init(n,t)}}),u=o.enc={},f=u.Hex={stringify:function(t){for(var n=t.words,r=t.sigBytes,e=[],i=0;i<r;i++){var o=n[i>>>2]>>>24-i%4*8&255;e.push((o>>>4).toString(16)),e.push((15&o).toString(16))}return e.join("")},parse:function(t){for(var n=t.length,r=[],e=0;e<n;e+=2)r[e>>>3]|=parseInt(t.substr(e,2),16)<<24-e%8*4;return new c.init(r,n/2)}},h=u.Latin1={stringify:function(t){for(var n=t.words,r=t.sigBytes,e=[],i=0;i<r;i++){var o=n[i>>>2]>>>24-i%4*8&255;e.push(String.fromCharCode(o))}return e.join("")},parse:function(t){for(var n=t.length,r=[],e=0;e<n;e++)r[e>>>2]|=(255&t.charCodeAt(e))<<24-e%4*8;return new c.init(r,n)}},d=u.Utf8={stringify:function(t){try{return decodeURIComponent(escape(h.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return h.parse(unescape(encodeURIComponent(t)))}},l=s.BufferedBlockAlgorithm=a.extend({reset:function(){this._data=new c.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=d.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(n){var r,e=this._data,i=e.words,o=e.sigBytes,s=this.blockSize,a=o/(4*s),u=(a=n?t.ceil(a):t.max((0|a)-this._minBufferSize,0))*s,f=t.min(4*u,o);if(u){for(var h=0;h<u;h+=s)this._doProcessBlock(i,h);r=i.splice(0,u),e.sigBytes-=f}return new c.init(r,f)},clone:function(){var t=a.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),p=(s.Hasher=l.extend({cfg:a.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(n,r){return new t.init(r).finalize(n)}},_createHmacHelper:function(t){return function(n,r){return new p.HMAC.init(t,r).finalize(n)}}}),o.algo={});return o}(Math);(function(t){var n=utag.ut.md5,r=n.lib,e=r.WordArray,i=r.Hasher,o=n.algo,s=[];!function(){for(var n=0;n<64;n++)s[n]=4294967296*t.abs(t.sin(n+1))|0}();var a=o.MD5=i.extend({_doReset:function(){this._hash=new e.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,n){for(var r=0;r<16;r++){var e=n+r,i=t[e];t[e]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var o=this._hash.words,a=t[n+0],d=t[n+1],l=t[n+2],p=t[n+3],y=t[n+4],g=t[n+5],w=t[n+6],v=t[n+7],_=t[n+8],m=t[n+9],B=t[n+10],x=t[n+11],b=t[n+12],S=t[n+13],H=t[n+14],z=t[n+15],C=o[0],M=o[1],A=o[2],D=o[3];C=c(C,M,A,D,a,7,s[0]),D=c(D,C,M,A,d,12,s[1]),A=c(A,D,C,M,l,17,s[2]),M=c(M,A,D,C,p,22,s[3]),C=c(C,M,A,D,y,7,s[4]),D=c(D,C,M,A,g,12,s[5]),A=c(A,D,C,M,w,17,s[6]),M=c(M,A,D,C,v,22,s[7]),C=c(C,M,A,D,_,7,s[8]),D=c(D,C,M,A,m,12,s[9]),A=c(A,D,C,M,B,17,s[10]),M=c(M,A,D,C,x,22,s[11]),C=c(C,M,A,D,b,7,s[12]),D=c(D,C,M,A,S,12,s[13]),A=c(A,D,C,M,H,17,s[14]),C=u(C,M=c(M,A,D,C,z,22,s[15]),A,D,d,5,s[16]),D=u(D,C,M,A,w,9,s[17]),A=u(A,D,C,M,x,14,s[18]),M=u(M,A,D,C,a,20,s[19]),C=u(C,M,A,D,g,5,s[20]),D=u(D,C,M,A,B,9,s[21]),A=u(A,D,C,M,z,14,s[22]),M=u(M,A,D,C,y,20,s[23]),C=u(C,M,A,D,m,5,s[24]),D=u(D,C,M,A,H,9,s[25]),A=u(A,D,C,M,p,14,s[26]),M=u(M,A,D,C,_,20,s[27]),C=u(C,M,A,D,S,5,s[28]),D=u(D,C,M,A,l,9,s[29]),A=u(A,D,C,M,v,14,s[30]),C=f(C,M=u(M,A,D,C,b,20,s[31]),A,D,g,4,s[32]),D=f(D,C,M,A,_,11,s[33]),A=f(A,D,C,M,x,16,s[34]),M=f(M,A,D,C,H,23,s[35]),C=f(C,M,A,D,d,4,s[36]),D=f(D,C,M,A,y,11,s[37]),A=f(A,D,C,M,v,16,s[38]),M=f(M,A,D,C,B,23,s[39]),C=f(C,M,A,D,S,4,s[40]),D=f(D,C,M,A,a,11,s[41]),A=f(A,D,C,M,p,16,s[42]),M=f(M,A,D,C,w,23,s[43]),C=f(C,M,A,D,m,4,s[44]),D=f(D,C,M,A,b,11,s[45]),A=f(A,D,C,M,z,16,s[46]),C=h(C,M=f(M,A,D,C,l,23,s[47]),A,D,a,6,s[48]),D=h(D,C,M,A,v,10,s[49]),A=h(A,D,C,M,H,15,s[50]),M=h(M,A,D,C,g,21,s[51]),C=h(C,M,A,D,b,6,s[52]),D=h(D,C,M,A,p,10,s[53]),A=h(A,D,C,M,B,15,s[54]),M=h(M,A,D,C,d,21,s[55]),C=h(C,M,A,D,_,6,s[56]),D=h(D,C,M,A,z,10,s[57]),A=h(A,D,C,M,w,15,s[58]),M=h(M,A,D,C,S,21,s[59]),C=h(C,M,A,D,y,6,s[60]),D=h(D,C,M,A,x,10,s[61]),A=h(A,D,C,M,l,15,s[62]),M=h(M,A,D,C,m,21,s[63]),o[0]=o[0]+C|0,o[1]=o[1]+M|0,o[2]=o[2]+A|0,o[3]=o[3]+D|0},_doFinalize:function(){var n=this._data,r=n.words,e=8*this._nDataBytes,i=8*n.sigBytes;r[i>>>5]|=128<<24-i%32;var o=t.floor(e/4294967296),s=e;r[15+(i+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),r[14+(i+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),n.sigBytes=4*(r.length+1),this._process();for(var a=this._hash,c=a.words,u=0;u<4;u++){var f=c[u];c[u]=16711935&(f<<8|f>>>24)|4278255360&(f<<24|f>>>8)}return a},clone:function(){var t=i.clone.call(this);return t._hash=this._hash.clone(),t}});function c(t,n,r,e,i,o,s){var a=t+(n&r|~n&e)+i+s;return(a<<o|a>>>32-o)+n}function u(t,n,r,e,i,o,s){var a=t+(n&e|r&~e)+i+s;return(a<<o|a>>>32-o)+n}function f(t,n,r,e,i,o,s){var a=t+(n^r^e)+i+s;return(a<<o|a>>>32-o)+n}function h(t,n,r,e,i,o,s){var a=t+(r^(n|~e))+i+s;return(a<<o|a>>>32-o)+n}n.MD5=i._createHelper(a),n.HmacMD5=i._createHmacHelper(a)}(Math));try{if(typeof b['tid_acs_cookie']!='undefined'&&b['tid_acs_cookie']!=''){b['tid_acs_cookie']=utag.ut.md5.MD5(b['tid_acs_cookie']).toString();}}catch(e){}}];u.send=function(a,b){if(u.ev[a]||u.ev.all!==undefined){var c,d,e,f,i;u.data={};for(c=0;c<u.extend.length;c++){try{d=u.extend[c](a,b);if(d==false)return}catch(e){}};for(d in utag.loader.GV(u.map)){e=u.map[d].split(",");for(f=0;f<e.length;f++){u.data[e[f]]=(b[d]===undefined?'':b[d]);}}
var LOGGING=false;if(typeof u.data['loggingRequired']!=='undefined'){if(u.data['loggingRequired'].toString().toLowerCase()==='true'){LOGGING=true;}}
var GET_OR_POST='GET';if(typeof u.data['sendingMethod']!=='undefined'){if(u.data['sendingMethod'].toString().toUpperCase()==='POST'){GET_OR_POST='POST';}}
if(LOGGING){console.log('NUK PIXEL : '+GET_OR_POST+' call requested.');}
var INCLUDE_BLANKS=true;if(typeof u.data['includeBlanks']!=='undefined'){if(u.data['includeBlanks'].toString().toLowerCase()==='false'){INCLUDE_BLANKS=false;}}
if(LOGGING){console.log('NUK PIXEL : Parameters with a blank value will '+(INCLUDE_BLANKS===false?'NOT ':'')+'be included in the pixel.');}
var endPoint='';if(typeof u.data['endPoint']!=='undefined'){if((typeof u.data['p.p']!=='undefined')&&u.data['p.p'].toString()!==''){endPoint=u.data['endPoint'].toString();if(LOGGING){console.log('NUK PIXEL : Endpoint is set to '+endPoint);}
if(typeof u.data['p.n']==='undefined'||u.data['p.n']===null||u.data['p.n'].toString()===''){if(LOGGING){console.log('NUK PIXEL : Network parameter (n) is not set.');}
try{var n=utag.cfg.path.split('/')[5],su=false;n=n.toLowerCase();if(n.indexOf('talksport')>-1||n.indexOf('virginradio')>-1){u.data['p.n']='wls';su=true;}
else if(n.indexOf('dreamteam')===0||n.indexOf('thesun.')===0){u.data['p.n']='ngn';su=true;}
else if(n.indexOf('thetimes.')===0||n.indexOf('thesundaytimes.')===0){u.data['p.n']='tnl';su=true;}
else if(n.indexOf('sun')>-1){u.data['p.n']='ngn';su=true;}
else if(n.indexOf('times')>-1){u.data['p.n']='tnl';su=true;}
if(LOGGING){console.log('NUK PIXEL : '+(su===true?('Value inferred for Network parameter (n) = '+u.data['p.n'].toString()):'Unable to infer a value for Network (n).'));}}catch(e){}}
var qs='';if(GET_OR_POST==='GET'){qs='et='+(a.toString().toLowerCase()==='view'?'0':'1');for(d in u.data){if(d.toString().toLowerCase().indexOf('p.')===0){if(INCLUDE_BLANKS===true||(u.data[d]!==undefined&&u.data[d]!==null&&u.data[d].toString()!=='')){qs=qs+'&'+d.toString().substring(2)+'='+encodeURIComponent(u.data[d]);}}}
if(LOGGING){console.log('NUK PIXEL : Sending the pixel now.');}
var nukpImg=new Image();nukpImg.src=endPoint+'?'+qs;}else if(GET_OR_POST==='POST'){qs={};qs.et=(a.toString().toLowerCase()==='view'?'0':'1');for(d in u.data){if(d.toString().toLowerCase().indexOf('p.')===0){if(INCLUDE_BLANKS===true||(u.data[d]!==undefined&&u.data[d]!==null&&u.data[d].toString()!=='')){try{t=u.data[d].toString();qs[d.toString().substring(2)]=t;}
catch(e){if(LOGGING){console.log('NUK PIXEL : Unable to set parameter "'+d.toString().substring(2)+'"');}}}}}
var nukp=new XMLHttpRequest();nukp.onreadystatechange=function(){if(this.readyState==4&&this.status==200){}};nukp.open('POST',endPoint,true);nukp.setRequestHeader("Content-Type","application/json");if(LOGGING){console.log('NUK PIXEL : Sending the pixel now.');}
qs=JSON.stringify(qs);nukp.send(qs);}}
else{if(LOGGING){console.log('NUK PIXEL : ERROR : "publication" is mandatory, but no value has been provided.');}}}
else{if(LOGGING){console.log('NUK PIXEL : ERROR : Endpoint is not set.');}}
}};utag.o[loader].loader.LOAD(id);})("78","newsinternational.thesun.web.2017");}catch(error){utag.DB(error);}
