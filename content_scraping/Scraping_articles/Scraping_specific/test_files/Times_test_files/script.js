"object"!==typeof DotmetricsJSON&&(DotmetricsJSON=window.JSON);(function(){function H(y){this.foundVideoPlayers=[];this.SearchForNewVideoPlayersInterval=5E3;this.newVideoFoundCallback=y;this.init=function(){this.trackVideos()};this.trackVideos=function(){function a(a){a.contentWindow&&c.searchForVideosInWindow(a.contentWindow)}this.searchForVideosInWindow(window);for(var e=window.document.getElementsByTagName("iframe"),c=this,f=0;f<e.length;f++)a(e[f]);c=this;setTimeout(function(){c.trackVideos()},this.SearchForNewVideoPlayersInterval)};this.searchForVideosInWindow=
function(a){try{a.jwplayer}catch(e){return}this.searchForFlowPlayerPlayersInWindow(a);this.searchForJWPlayerPlayersInWindow(a);this.searchForVideoJSPlayersInWindow(a)};this.searchForFlowPlayerPlayersInWindow=function(a){if(a.flowplayer){var e=[],c=0;if("undefined"!=typeof a.flowplayer.instances)for(a.flowplayer.instances.forEach(function(a){e.push(a)}),c=0;c<e.length;c++)0>this.foundVideoPlayers.indexOf(e[c])&&(this.foundVideoPlayers.push(e[c]),this.newVideoFoundCallback("flowPlayer",a.flowplayer.version,
e[c]))}};this.searchForJWPlayerPlayersInWindow=function(a){if(a.jwplayer){var e=[],c=a.jwplayer.version;for(f=0;a.jwplayer(f)&&a.jwplayer(f).id;)e.push(a.jwplayer(f)),f++;for(var f=0;f<e.length;f++){a=!0;for(var g=0;g<this.foundVideoPlayers.length;g++)this.foundVideoPlayers[g].id&&this.foundVideoPlayers[g].id==e[f].id&&(a=!1);a&&(this.foundVideoPlayers.push(e[f]),this.newVideoFoundCallback("jwPlayer",e[f].version?e[f].version:c,e[f]))}}};this.searchForVideoJSPlayersInWindow=function(a){if(a.videojs&&
"object"==typeof a.videojs.players)for(videoId in a.videojs.players){var e=a.videojs.players[videoId];e&&0>this.foundVideoPlayers.indexOf(e)&&(this.foundVideoPlayers.push(e),this.newVideoFoundCallback("videojs",a.videojs.VERSION,e))}}}function I(y){function a(d){for(var b={},a=Object.keys(d).sort(function(b,d){return b.localeCompare(d)}),l=0;l<a.length;l++)b[a[l]]=d[a[l]];return b}this.formPostCount=this.pingSendCount=this.dataSendCount=0;this.callLimit=10;this.SettingsObject=y;this.baseUrlPrefix=
this.SettingsObject.BaseUrl;this.dmURLs={DataUrl:"/SiteEvent.dotmetrics",PingUrl:"/Ping.dotmetrics",PostUrl:"/DeviceInfo.dotmetrics",AjaxEventUrl:"/AjaxEvent.dotmetrics",BeaconUrl:"/BeaconEvent.dotmetrics",ErrorEventUrl:"/ErrorEvent.dotmetrics",EdiUrl:"/edi",EdiDailyUrl:"/edi-daily"};this.isRegExp=function(d){return"[object RegExp]"==Object.prototype.toString.call(d)};this.setCookie=function(d,b,a,l){var h=new Date;h.setDate(h.getDate()+a);l&&h.setMinutes(h.getMinutes()+l);b=escape(b)+(null==a?"":
"; expires="+h.toUTCString());document.cookie=d+"="+b+";path=/;secure;"};this.getCookie=function(d){return this.hasCookie(d)?this.listCookie()[d+""]:null};this.hasCookie=function(d){return(new RegExp("(?:;\\s*|^)"+encodeURIComponent(d+"")+"=")).test(document.cookie)};this.lsAvailable=function(){try{var d=window.localStorage;d.setItem("__storage_test__","__storage_test__");d.removeItem("__storage_test__");return!0}catch(b){return!1}};this.listCookie=function(d){for(var b=document.cookie.split(";"),
a,l={},e=0,c=b.length;e<c;++e)if(a=b[e].split("="),a[0]=a[0].replace(/^\s+|\s+$/,""),!this.isRegExp(d)||d.test(a[0]))try{l[decodeURIComponent(a[0])]=decodeURIComponent(a[1])}catch(B){}return l};this.sendData=function(a,b){switch(a){case this.baseUrlPrefix+this.dmURLs.DataUrl:this.dataSendCount++;if(this.dataSendCount>this.callLimit)return;break;case this.baseUrlPrefix+this.dmURLs.PingUrl:if(this.pingSendCount++,this.pingSendCount>this.callLimit)return}var d="";null!=b&&(d=this.encode(DotmetricsJSON.stringify(b)),
d=encodeURIComponent(d),d="&v="+d);b=(new Date).getTime();a=a+"?r="+b+d;d=document.createElement("script");d.setAttribute("src",a);(document.getElementsByTagName("head")[0]||document.head||document.body).appendChild(d)};this.performAjaxPost=function(a,b,h){var d=this.encode(DotmetricsJSON.stringify(b));d=encodeURIComponent(d);b=(new Date).getTime();d="v="+d+"&r="+b;var e=new XMLHttpRequest;e.open("POST",a+("?"+b),!0);e.withCredentials=!0;e.setRequestHeader("Content-Type","application/x-www-form-urlencoded");
h&&e.addEventListener("loadend",function(){h(e.response)});e.send(d)};this.performFPPost=function(d,a,h){var b=this.encode(DotmetricsJSON.stringify(a));b=encodeURIComponent(b);a=(new Date).getTime();b="v="+b+"&r="+a;var e=new XMLHttpRequest;e.open("POST",d+("?"+a),!0);e.withCredentials=!0;e.setRequestHeader("Content-Type","application/x-www-form-urlencoded");h&&e.addEventListener("loadend",function(){h(e.response)});e.send(b)};this.performSendBeacon=function(a,b){this.sendMessageToExtension({target:"dotmetrics-extension",
type:"beacon",url:a,data:b});b=this.encode(DotmetricsJSON.stringify(b));b=encodeURIComponent(b);var d=(new Date).getTime();b=new Blob(["v="+b+"&r="+d],{type:"application/x-www-form-urlencoded"});try{return F.boundBeacon(a,b)}catch(l){return!1}};this.addEventSimple=function(a,b,h){a.addEventListener?a.addEventListener(b,h,!1):a.attachEvent&&a.attachEvent("on"+b,h)};this.removeEventSimple=function(a,b,h){a.removeEventListener?a.removeEventListener(b,h,!1):a.detachEvent&&a.detachEvent("on"+b,h)};this.isIE=
function(){return-1!=navigator.appName.indexOf("Microsof")?!0:!1};this.saveInLocalStorage=function(a){if(this.lsAvailable())for(var b in a)a.hasOwnProperty(b)&&window.localStorage.setItem(b+"",a[b])};this.getFromLocalStorage=function(a){return this.lsAvailable()?window.localStorage.getItem(a+""):null};this.removeFromLocalStorage=function(a){return this.lsAvailable()?window.localStorage.removeItem(a+""):null};this.sortByProperty=function(a,b,h){return a.sort(function(a,d){return a[b]<d[b]?"asc"===
h?1:-1:a[b]>[b]?"asc"===h?-1:1:0})};this.CreateElement=function(a,b,h){if(null!=a){a=document.createElement(a);if(null!=b)for(x in b)"function"==typeof b[x]?this.addEventSimple(a,x,b[x]):(a.setAttribute(x,b[x]),"class"==x&&(a.className=b[x]));null!=h&&(b=document.createTextNode(h.toString()),a.appendChild(b));return a}return null!=h?document.createTextNode(h.toString()):null};this.clientInfoTimingData=this.clientInfo=null;this.createClientInfo=function(a){function b(){k=p.detect(e[r])?k+"1":k+"0";
r++;r>=e.length?(c.FontString=k,q.clientInfo=c,v=(new Date).getTime()-v,q.clientInfoTimingData.fontInfoTime=v,a()):setTimeout(function(){b()},30)}if(this.clientInfo)a&&a();else{this.clientInfoTimingData={};var d=(new Date).getTime(),e="cursive;monospace;serif;sans-serif;fantasy;Arial;Arial Black;Arial Narrow;Arial Rounded MT Bold;Bookman Old Style;Bradley Hand ITC;Century;Century Gothic;Comic Sans MS;Courier;Courier New;Georgia;Gentium;Impact;King;Lucida Console;Lalit;Modena;Monotype Corsiva;Papyrus;Tahoma;TeX;Times;Times New Roman;Trebuchet MS;Verdana;Verona;Bell MT;Berlin Sans FB;Corbel;Kalinga;Miriam Regular;Modern Standard;Segoe UI;Segoe Print;Inconsolata;Droid Sans Mono;Anonymous Pro;Liberation Mono;Terminus;Rosario;Roboto Slab;Oswald;Stalemate;Crimson Text;Gravitas One;Jura;League Gothic;Fjord;Proxima Nova;Trivia Grotesk;Pluto Sans;Museo Sans;Futura;Al Bayan;American Typewriter;Andale Mono;Apple Casual;Apple Chancery;Apple Garamond;Apple Gothic;Apple LiGothic;Apple LiSung;Apple Myungjo;Apple Symbols;.AquaKana;Arial Hebrew;Ayuthaya;Baghdad;Baskerville;Beijing;BiauKai;Big Caslon;Brush Script;Chalkboard;Chalkduster;Charcoal;Charcoal CY;Chicago;Cochin;Comic Sans;Cooper;Copperplate;Corsiva Hebrew;DecoType Naskh;Devanagari;Didot;Euphemia UCAS;Fang Song;Gadget;Geeza Pro;Geezah;Geneva;Geneva CY;Gill Sans;Gujarati;Gung Seoche;Gurmukhi;Hangangche;HeadlineA;Hei;Helvetica;Helvetica CY;Helvetica Neue;Herculanum;Hiragino Kaku Gothic Pro;Hiragino Kaku Gothic ProN;Hiragino Kaku Gothic Std;Hiragino Kaku Gothic StdN;Hiragino Maru Gothic Pro;Hiragino Maru Gothic ProN;Hiragino Mincho Pro;Hiragino Mincho ProN;Hoefler Text;Inai Mathi;Jung Gothic;Kai;Keyboard;Krungthep;KufiStandard GK;LastResort;LiHei Pro;LiSong Pro;Lucida Grande;Marker Felt;Menlo;Monaco;Monaco CY;Mshtakan;Nadeem;New Peninim;New York;NISC GB18030;Optima;Osaka;Palatino;PC Myungjo;Pilgiche;Plantagenet Cherokee;Raanana;Sand;Sathu;Seoul;Shin Myungjo Neue;Silom;Skia;Song;ST FangSong;ST Heiti;ST Kaiti;ST Song;Symbol;Tae Graphic;Taipei;Techno;Textile;Thonburi;Times CY;Zapf Chancery;Zapf Dingbats;Zapfino;Abadi MT Condensed Light;Aharoni;Aldhabi;Andalus;Angsana New;AngsanaUPC;Aparajita;Arabic Typesetting;Arial Nova;Batang;BatangChe;Book Antiqua;Browallia New;BrowalliaUPC;Calibri;Calibri Light;Calisto MT;Cambria;Cambria Math;Candara;Consolas;Constantia;Copperplate Gothic Bold;Copperplate Gothic Light;Cordia New;CordiaUPC;DaunPenh;David;Dengxian;DFKai-SB;DilleniaUPC;DokChampa;Dotum;DotumChe;Ebrima;Estrangelo Edessa;EucrosiaUPC;Euphemia;FangSong;Franklin Gothic Medium;FrankRuehl;FreesiaUPC;Gabriola;Gadugi;Gautami;Georgia Pro;Gill Sans Nova;Gisha;Gulim;GulimChe;Gungsuh;GungsuhChe;IrisUPC;Iskoola Pota;JasmineUPC;KaiTi;Kartika;Khmer UI;KodchiangUPC;Kokila;Lao UI;Latha;Leelawadee;Leelawadee UI;Levenim MT;LilyUPC;Lucida Handwriting Italic;Lucida Sans Unicode;Malgun Gothic;Mangal;Manny ITC;Marlett;Meiryo;Meiryo UI;Microsoft Himalaya;Microsoft JhengHei;Microsoft JhengHei UI;Microsoft New Tai Lue;Microsoft PhagsPa;Microsoft Sans Serif;Microsoft Tai Le;Microsoft Uighur;Microsoft YaHei;Microsoft YaHei UI;Microsoft Yi Baiti;MingLiU, PMingLiU;MingLiU-ExtB, PMingLiU-ExtB;MingLiU_HKSCS;MingLiU_HKSCS-ExtB;Miriam, Miriam Fixed;Mongolian Baiti;MoolBoran;MS Gothic, MS PGothic;MS Mincho, MS PMincho;MS UI Gothic;MV Boli;Myanmar Text;Narkisim;Neue Haas Grotesk Text Pro;News Gothic MT;Nirmala UI;NSimSun;Nyala;Palatino Linotype;Raavi;Rockwell Nova;Rod;Sakkal Majalla;Sanskrit Text;Segoe MDL2 Assets;Segoe Script;Segoe UI v5.00[3];Segoe UI v5.01[4];Segoe UI v5.27[5];Segoe UI v5.35;Segoe UI Emoji;Segoe UI Historic[6];Segoe UI Symbol;Shonar Bangla;Shruti;SimHei;SimKai;Simplified Arabic;SimSun;SimSun-ExtB;Sitka Banner;Sitka Display;Sitka Heading;Sitka Small;Sitka Subheading;Sitka Text;Sylfaen;Traditional Arabic;Tunga;Urdu Typesetting;Utsaah;Vani;Verdana Pro;Vijaya;Vrinda;Webdings;Westminster;Wingdings;Yu Gothic;Yu Gothic UI;Yu Mincho;Abyssinica SIL;Bitstream Charter;Century Schoolbook L;Courier 10 Pitch;DejaVu Sans;DejaVu Sans Condensed;DejaVu Sans Light;DejaVu Sans Mono;DejaVu Serif;DejaVu Serif Condensed;Dingbats;Droid Arabic Kufi;Droid Arabic Naskh;Droid Naskh Shift Alt;Droid Sans;Droid Sans Arabic;Droid Sans Armenian;Droid Sans Ethiopic;Droid Sans Fallback;Droid Sans Georgian;Droid Sans Hebrew;Droid Sans Japanese;Droid Serif;FreeMono;FreeSans;FreeSerif;Gargi;Garuda;KacstArt;KacstBook;KacstDecorative;KacstDigital;KacstFarsi;KacstLetter;KacstNaskh;KacstOffice;KacstOne;KacstPen;KacstPoster;KacstQurn;KacstScreen;KacstTitle;KacstTitleL;Kedage;Khmer OS;Khmer OS System;Kinnari;Laksaman;Liberation Sans;Liberation Sans Narrow;Liberation Serif;LKLUG;Lohit Bengali;Lohit Devanagari;Lohit Gujarati;Lohit Punjabi;Lohit Tamil;Loma;Mallige;Meera;mry_KacstQurn;Mukti Narrow;NanumBarunGothic;NanumGothic;NanumMyeongjo;Nimbus Mono L;Nimbus Roman No9 L;Nimbus Sans L;Norasi;OpenSymbol;Padauk;Padauk Book;Phetsarath OT;Pothana2000;Purisa;Rachana;Rekha;Saab;Sawasdee;STIX;STIXGeneral;TakaoPGothic;Tibetan Machine Uni;Tlwg Typist;Tlwg Typo;TlwgMono;TlwgTypewriter;Ubuntu;Ubuntu Condensed;Ubuntu Light;Ubuntu Mono;Umpush;URW Bookman L;URW Chancery L;URW Gothic L;URW Palladio L;utkal;Vemana2000;Waree;WenQuanYi Micro Hei;WenQuanYi Micro Hei Mono;Academy Engraved LET;Apple Color Emoji;AppleGothic;Bangla Sangam MN;Bodoni 72;Bodoni 72 Oldstyle;Bodoni 72 Smallcaps;Bodoni Ornaments;Bradley Hand;Chalkboard SE;Devanagari Sangam MN;Gujarati Sangam MN;Gurmukhi MN;Heiti SC;Heiti TC;Kailasa;Kannada Sangam MN;Malayalam Sangam MN;Marion;Noteworthy;Oriya Sangam MN;Party LET;Sinhala Sangam MN;Snell Roundhand;Tamil Sangam MN;Telugu Sangam MN".split(";"),
c={};c.AppCodeName=window.navigator.appCodeName;c.AppName=window.navigator.appName;c.Version=window.navigator.appVersion;c.Language=window.navigator.language;c.Platform=window.navigator.platform;c.Product=window.navigator.product;c.ProductSub=window.navigator.productSub;c.UserAgent=window.navigator.userAgent;c.Vendor=window.navigator.vendor;c.VendorSub=window.navigator.vendorSub;c.BuildId=window.navigator.buildID;c.OsCpu=window.navigator.oscpu;c.Screen={};c.Screen.AvailableWidth=window.screen.availWidth;
c.Screen.AvailableHeight=window.screen.availHeight;c.Screen.PixelDepth=window.screen.pixelDepth;c.Screen.ColorDepth=window.screen.colorDepth;var f=window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI;c.Screen.Width=Math.round(window.screen.width*f);c.Screen.Height=Math.round(window.screen.height*f);null==c.Screen.Width&&(c.Screen.Width=c.Screen.AvailableWidth);null==c.Screen.Height&&(c.Screen.Height=c.Screen.AvailableHeight);c.Plugins=[];if(window.ActiveXObject){f=/[0-9]+/;
var m={flash:"ShockwaveFlash.ShockwaveFlash",pdf:"AcroPDF.PDF",silverlight:"AgControl.AgControl",quicktime:"QuickTime.QuickTime"};for(n in m){var g=this.msieDetect(m[n]);g&&(g=(g=f.exec(g))&&g[0]||"",g={},g.Name=m[n],g.FileName="",c.Plugins.push(g))}}else for(var r=0;r<window.navigator.plugins.length;r++){var n=window.navigator.plugins[r];f={};f.Name=n.name;f.FileName=n.filename;c.Plugins.push(f)}c.MimeTypes=[];for(r=0;n=window.navigator.mimeTypes[r];r++)f={},f.Type=n.type,f.Suffixes=n.suffixes,c.MimeTypes.push(f);
d=(new Date).getTime()-d;this.clientInfoTimingData.basicInfoTime=d;d=(new Date).getTime();c.Canvas=this.CreateCanvasFP();d=(new Date).getTime()-d;this.clientInfoTimingData.canvasInfoTime=d;var k="",p=new function(){var a=["monospace","sans-serif","serif"],b=document.getElementsByTagName("body")[0],d=document.createElement("span");d.style.fontSize="72px";d.innerHTML="mmmmmmmmmmlli";var c={},e={},h;for(h in a)d.style.fontFamily=a[h],b.appendChild(d),c[a[h]]=d.offsetWidth,e[a[h]]=d.offsetHeight,b.removeChild(d);
this.detect=function(h){var f=!1,l;for(l in a){d.style.fontFamily=h+","+a[l];b.appendChild(d);var u=d.offsetWidth!=c[a[l]]||d.offsetHeight!=e[a[l]];b.removeChild(d);f=f||u}return f}},q=this;r=0;var v=(new Date).getTime();setTimeout(function(){b()},20)}};this.domainFPData=null;this.runDomainFP=function(a){null!=this.domainFPData&&a(this.domainFPData);var b={},d={},c=this,e=(new Date).getTime(),f=0,g=setInterval(function(){f+=m},100);this.runEdi({callback:function(){var h=c.SHA1(DotmetricsJSON.stringify(b));
b.unstable&&(h+="_unstable");clearInterval(g);d={t:(new Date).getTime()-e,tInt:f};c.domainFPData={dfp:b,dfph:h.toString(),timingData:d};a(c.domainFPData)},ediDataObject:b,asyncTestList:this.domainFpAsyncTests,syncTestList:this.domainFpSyncTests})};var e="sans-serif-thin;ARNO PRO;Agency FB;Arabic Typesetting;Arial Unicode MS;AvantGarde Bk BT;BankGothic Md BT;Batang;Bitstream Vera Sans Mono;Calibri;Century;Century Gothic;Clarendon;EUROSTILE;Franklin Gothic;Futura Bk BT;Futura Md BT;GOTHAM;Gill Sans;HELV;Haettenschweiler;Helvetica Neue;Humanst521 BT;Leelawadee;Letter Gothic;Levenim MT;Lucida Bright;Lucida Sans;Menlo;MS Mincho;MS Outlook;MS Reference Specialty;MS UI Gothic;MT Extra;MYRIAD PRO;Marlett;Meiryo UI;Microsoft Uighur;Minion Pro;Monotype Corsiva;PMingLiU;Pristina;SCRIPTINA;Segoe UI Light;Serifa;SimHei;Small Fonts;Staccato222 BT;TRAJAN PRO;Univers CE 55 Medium;Vrinda;ZWAdobeF;DotmetricsFont".split(";"),
c=this;this.domainFpSyncTests=[function(a,b){b=void 0===b?{}:b;c.runHasLocalStorageFp(a,b)},function(a,b){b=void 0===b?{}:b;c.runBluetoothAPI(a,b)},function(a,b){b=void 0===b?{}:b;c.createWebglFP(a,b,[{numTriangles:1,vertexData:[-.876,-.65634,0,.8634,-.85673,0,0,.7234,0],colorData:[.986,.12,.55,0,1,0,0,0,1],imageName:"Img1"}])},function(a,b){b=void 0===b?{}:b;c.createForcedColorsFP(a,b)},function(a,b){b=void 0===b?{}:b;c.createDynamicContrastFP(a,b)},function(a,b){b=void 0===b?{}:b;c.createMonochromaticFP(a,
b)},function(a,b){b=void 0===b?{}:b;c.createTransparencyFP(a,b)},function(a,b){b=void 0===b?{}:b;c.createArchitectureFP(a,b)},function(a,b){b=void 0===b?{}:b;c.createMathCalculationsFP(a,b)},function(a,b){b=void 0===b?{}:b;c.createSampleRateFp(a,b)},function(a,b){b=void 0===b?{}:b;c.createMotionFp(a,b)},function(a,b){b=void 0===b?{}:b;c.createColorGamutFp(a,b)},function(a,b){b=void 0===b?{}:b;c.createTouchSupportFp(a,b)},function(a,b){b=void 0===b?{}:b;c.createNavigatorFP(a,b,{testWidth:!1})},function(a,
b){b=void 0===b?{}:b;c.browserFeaturesFP(a,b)},function(a,b){b=void 0===b?{}:b;c.createWebGlPropertiesFp(a,b)}];this.domainFpAsyncTests=[function(a,b,h){c.runMediaDeviceInfoFp({callback:a,ediDataObject:b,timingDataObject:h,testInfo:!1,testCount:!0})},function(a,b,h){c.createAudioFp("triangle",a,b,h)},function(a,b,h){c.createDomainFontFP({resultProperty:"expFontsOld",testFonts:e,callback:a},b,h)},function(a,b,h){c.createNewCanvasFP({callback:a,ediDataObject:b,timingDataObject:h,options:{renderText:!1,
renderGeometry:!0}})},function(a,b,h){c.createPermissionsAndSensorFP(a,b,h)}];this.runEdi=function(a){function b(){m<f.length?setTimeout(function(){f[m](b,c,e);m++},20):d()}var d=a.callback,c=a.ediDataObject,e=void 0===a.timingDataObject?{}:a.timingDataObject,f=a.asyncTestList;a=a.syncTestList;for(var g=0;g<a.length;g++)a[g](c,e);var m=0;b()};this.browserFeaturesFP=function(a,b){function d(a){return a.replace(/([a-z])-([a-z])/g,function(a,b,d){return b+d.toUpperCase()}).replace(/^-/,"")}function c(a,
b,d,c,e){var h=a.charAt(0).toUpperCase()+a.slice(1),f=(a+" "+["Moz","O","ms","Webkit"].join(h+" ")+h).split(" ");if("string"===typeof b||"undefined"===typeof b)return g(f,b,c,e);f=(a+" "+["moz","o","ms","webkit"].join(h+" ")+h).split(" ");a:{a=f;for(var l in a)if(a[l]in b){if(!1===d){b=a[l];break a}l=b[a[l]];if("function"===typeof l){b=m(l,d||b);break a}b=l;break a}b=!1}return b}function e(a,b){var d=a.length;if("CSS"in window&&"supports"in window.CSS){for(;d--;)if(window.CSS.supports(f(a[d]),b))return!0;
return!1}if("CSSSupportsRule"in window){for(var c=[];d--;)c.push("("+f(a[d])+":"+b+")");c=c.join(" or ");return injectElementWithStyles("@supports ("+c+") { #dotmetrics { position: absolute; } }",function(a){return"absolute"===computedStyle(a,null,"position")})}}function f(a){return a.replace(/([A-Z])/g,function(a,b){return"-"+b.toLowerCase()}).replace(/^ms-/,"-ms-")}function g(a,b,c,h){function f(){u&&(delete q.style,delete q.modElem)}h="undefined"===typeof h?!1:h;if("undefined"!==typeof c){var l=
e(a,c);if("undefined"!==typeof l)return l}for(l=["dotmetrics","tspan","samp"];!q.style&&l.length;){var u=!0;q.modElem=document.createElement(l.shift());q.style=q.modElem.style}var k=a.length;for(l=0;l<k;l++){var g=a[l];var t=q.style[g];~(""+g).indexOf("-")&&(g=d(g));if(void 0!==q.style[g]){if(h||"undefined"===typeof c)return f(),"pfx"===b?g:!0;try{q.style[g]=c}catch(N){}if(q.style[g]!==t)return f(),"pfx"===b?g:!0}}f();return!1}function m(a,b){return function(){return a.apply(b,arguments)}}function r(a,
b){return"function"===typeof b?b():b}function n(a){var b=document.createElement("video"),d={};try{b.canPlayType&&("video.ogg"===a&&(d["video.ogg"]=b.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,"")),"video.hls"===a&&(d["video.hls"]=b.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(/^no$/,"")))}catch(E){}b.remove();return d}function k(a){a=a();var b="";if("object"===typeof a)for(var d in a)b+=1==a[d]?"1":"0";else b+=1==a?"1":"0";return b}var p=(new Date).getTime(),q=
{style:document.createElement("dotmetrics").style},v=[function(){var a=!1;try{a="SVGFEColorMatrixElement"in window&&2===SVGFEColorMatrixElement.SVG_FECOLORMATRIX_TYPE_SATURATE}catch(A){}return a},function(){return"openDatabase"in window},function(){return n("video.hls")},function(){return"Worker"in window},function(){return"capture"in document.createElement("input")},function(){return n("video.ogg")},function(){var a="search",b=void 0,d=!("onblur"in document);b&&"string"!==typeof b||(b=document.createElement(b||
"div"));a="on"+a;var c=a in b;!c&&d&&(b.setAttribute||(b=document.createElement("div")),b.setAttribute(a,""),c="function"===typeof b[a],"undefined"!==b[a]&&(b[a]=void 0),b.removeAttribute(a));return c},function(){return c("translate","45px",!0)},function(){return"applicationCache"in window},function(){return c("backdropFilter")},function(){return c("fontVariationSettings")},function(){return"import"in document.createElement("link")},function(){return c("scrollSnapType")},function(){var a=document.createElement("canvas");
if(a.getContext&&a.getContext("2d")&&"function"===typeof a.getContext("2d").fillText){a=a.getContext("2d");var b=12*(a.webkitBackingStorePixelRatio||a.mozBackingStorePixelRatio||a.msBackingStorePixelRatio||a.oBackingStorePixelRatio||a.backingStorePixelRatio||1);a.fillStyle="#f00";a.textBaseline="top";a.font="32px Arial";a.fillText("\ud83d\udc28",0,0);a=0!==a.getImageData(b,b,1,1).data[0]}else a=!1;return{emoji:a}},function(){return!!(Array.prototype&&Array.prototype.copyWithin&&Array.prototype.fill&&
Array.prototype.find&&Array.prototype.findIndex&&Array.prototype.keys&&Array.prototype.entries&&Array.prototype.values&&Array.from&&Array.of)},function(){var a=document.createElement("canvas"),b=!1;try{b=0===a.toDataURL("image/webp").indexOf("data:image/webp")}catch(D){}return{todataurlwebp:b}},function(){var a=!1;try{a="WebSocket"in window&&2===window.WebSocket.CLOSING}catch(A){}return a},function(){var a=document.createElement("audio");return Object.assign({},a.canPlayType?{"audio.m4a":r("audio.m4a",
(a.canPlayType("audio/x-m4a;")||a.canPlayType("audio/aac;")).replace(/^no$/,""))}:{})}],w="",t=0;for(;t<v.length;t++)w+=k(v[t]);v=(new Date).getTime();a.browserFeatures=w;b.browserFeatures=v-p};this.createWebGlPropertiesFp=function(a,b){function d(a){var b={renderer:"",vendor:""},d=a.getExtension("WEBGL_debug_renderer_info");null!=d&&(b.renderer=a.getParameter(d.UNMASKED_RENDERER_WEBGL),b.vendor=a.getParameter(d.UNMASKED_VENDOR_WEBGL));return b}function c(a){return"["+a[0]+", "+a[1]+"]"}this.startFPTimer();
var e=(new Date).getTime();try{var f=function(a){try{return a()}catch(v){return""}},g=document.createElement("canvas");g.width=100;g.height=100;document.body.appendChild(g);var m=window.WebGL2RenderingContext&&g.getContext("webgl2",{stencil:!0})?window.WebGL2RenderingContext:window.WebGLRenderingContext;for(var r=m===window.WebGL2RenderingContext?["webgl2","experimental-webgl2"]:["webgl","experimental-webgl"],n=null,k={},p=0;p<r.length&&!(n=g.getContext(r[p],{stencil:!0}));p++);n&&(k.unMaskedVendor=
f(function(){return d(n).vendor}),k.unMaskedRenderer=f(function(){return d(n).renderer}),k.extensions=n.getSupportedExtensions()?f(function(){return n.getSupportedExtensions().join(",")}):"",m===window.WebGL2RenderingContext&&(k.maxCombinedUniformBlocks=n.MAX_COMBINED_UNIFORM_BLOCKS?f(function(){return n.getParameter(n.MAX_COMBINED_UNIFORM_BLOCKS)}):null,k.maxCombinedVertexUniformComponents=n.MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS?f(function(){return n.getParameter(n.MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS)}):
null),k.maxViewportDimensions=f(function(){return c(n.getParameter(n.MAX_VIEWPORT_DIMS))}),k.maxCombinedTextureImageUnits=f(function(){return n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS)}),k.maxRenderBufferSize=f(function(){return n.getParameter(n.MAX_RENDERBUFFER_SIZE)}),m===window.WebGL2RenderingContext&&(k.maxTransformFeedbackInterleavedComponents=n.MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS?f(function(){return n.getParameter(n.MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS)}):null,k.max3dTextureSize=
n.MAX_3D_TEXTURE_SIZE?f(function(){return n.getParameter(n.MAX_3D_TEXTURE_SIZE)}):null,k.maxArrayTextureLayers=n.MAX_ARRAY_TEXTURE_LAYERS?f(function(){return n.getParameter(n.MAX_ARRAY_TEXTURE_LAYERS)}):null,k.maxSamples=n.MAX_SAMPLES?f(function(){return n.getParameter(n.MAX_SAMPLES)}):null),k.aliasedPointSizeRange=f(function(){return c(n.getParameter(n.ALIASED_POINT_SIZE_RANGE))}),a.webGlProps=DotmetricsJSON.stringify(k),b.webGlTime=(new Date).getTime()-e,b.webGlTimeInt=this.stopFPTimer())}catch(q){this.sendScriptError(q)}};
this.createNavigatorFP=function(a,b){var d={};d.AvailableHeight=window.screen.availHeight;d.Height=Math.round(window.screen.height*devicePixelRatio);d.UserAgent=window.navigator.userAgent;d.Version=window.navigator.appVersion;d.OsCpu=window.navigator.oscpu;d.ColorDepth=window.screen.colorDepth;d.PixelDepth=window.screen.pixelDepth;b.testWidth&&(a.AvailableWidth=window.screen.availWidth,a.Width=Math.round(window.screen.width*devicePixelRatio));a.Language=window.navigator.language.split("-")[0];a.navigatorProps=
d};this.createPermissionsAndSensorFP=function(d,b,c){function e(){function e(e,l,k){function q(){f[l]=t.hasReading;Object.keys(f).length===Object.keys(h).length&&(b.sensors=a(f),b.permissions=a(r),c.sensorsPermissionTiming=(new Date).getTime()-m,c.sensorsPermissionTimingInt=g.stopFPTimer(),d())}var t={hasReading:!1};if(e)try{var n=function(){clearTimeout(z);q();t.removeEventListener("reading",n);t.stop()};if(k.every(function(a){return"granted"===r[a]})){t=new e({frequency:60});t.addEventListener("reading",
n);t.start();var z=setTimeout(n,1E3)}else q()}catch(M){q()}else q()}var f={},h={absoluteOrientationSensor:function(){var a=!1;"function"===typeof AbsoluteOrientationSensor&&(a=AbsoluteOrientationSensor);e(a,"absoluteOrientationSensor",["accelerometer","gyroscope","magnetometer"])},accelerometer:function(){var a=!1;"function"===typeof Accelerometer&&(a=Accelerometer);e(a,"accelerometer",["accelerometer"])},magnetometer:function(){var a=!1;"function"===typeof Magnetometer&&(a=Magnetometer);e(a,"magnetometer",
["magnetometer"])},gyroscope:function(){var a=!1;"function"===typeof Gyroscope&&(a=Gyroscope);e(a,"gyroscope",["gyroscope"])},gravity:function(){var a=!1;"function"===typeof GravitySensor&&(a=GravitySensor);e(a,"gravity",["accelerometer"])},linearAcceleration:function(){var a=!1;"function"===typeof LinearAccelerationSensor&&(a=LinearAccelerationSensor);e(a,"linearAcceleration",["accelerometer"])},relativeOrientation:function(){var a=!1;"function"===typeof RelativeOrientationSensor&&(a=RelativeOrientationSensor);
e(a,"relativeOrientation",["accelerometer","gyroscope"])},ambientLight:function(){var a=!1;"function"===typeof AmbientLightSensor&&(a=AmbientLightSensor);e(a,"ambientLight",["ambient-light-sensor"])}},l;for(l in h)h[l]()}function f(){Object.keys(r).length===Object.keys(n).length&&e()}function h(a){try{navigator.permissions.query({name:a}).then(function(b){r[a]=b.state;f()}).catch(function(){r[a]="Unsupported";f()})}catch(q){r[a]="Unsupported",f()}}var g=this,m=(new Date).getTime();g.startFPTimer();
var r={},n="background-sync payment-handler accelerometer gyroscope magnetometer ambient-light-sensor midi".split(" ");try{for(var k=0;k<n.length;k++)h(n[k])}catch(J){this.sendScriptError(J),d()}};this.createNewCanvasFP=function(a){function b(a){function b(a){"unstable"===a&&(r.unstable=!0);return"unstable"===a||"unsupported"===a?a:k.SHA1(a).toString()}var d=(new Date).getTime()-p;r.canvas={};a.geometry&&(r.canvas.geometry=b(a.geometry));a.text&&(r.canvas.text=b(a.text));r.canvas.winding=a.winding;
n.newCanvasTiming=d;n.newCanvasTimingInt=k.stopFPTimer();m()}function d(a,b,d){var f=!1,h,l=document.createElement("canvas");l.width=1;l.height=1;var g=l.getContext("2d");if(g&&l.toDataURL)f=c(g),e(l,g,function(b){k=b[0];h=b[1];a({winding:f,geometry:k,text:h})},b,d);else{var k=h="unsupported";return{winding:f,geometry:k,text:h}}}function c(a){a.rect(0,0,10,10);a.rect(2,2,6,6);return!a.isPointInPath(5,5,"evenodd")}function e(a,b,d,c,e){function h(){e&&c&&m&&n&&l&&k?d([m,l]):e&&!c&&m&&n?d([m]):c&&!e&&
l&&k&&d([l])}var l,k,m,n;c&&(f(a,b),setTimeout(function(){l=a.toDataURL();f(a,b);setTimeout(function(){k=a.toDataURL();l!==k&&(l="unstable");h()},0)},0));e&&(g(a,b),setTimeout(function(){m=a.toDataURL();g(a,b);setTimeout(function(){n=a.toDataURL();m!==n&&(m="unstable");h()},0)},0))}function f(a,b){a.width=240;a.height=60;b.textBaseline="alphabetic";b.fillStyle="#f60";b.fillRect(100,1,62,20);b.fillStyle="#069";b.font='11pt "Times New Roman"';a="The quick brown fox jumps over the lazy dog  /* \ud83d\ude03 */"+
String.fromCharCode(55357,56835);b.fillText(a,2,15);b.fillStyle="rgba(102, 204, 0, 0.2)";b.font="18pt Arial";b.fillText(a,4,45)}function g(a,b){a.width=122;a.height=110;b.globalCompositeOperation="multiply";a=[{color:"#f2f",x:40,y:40},{color:"#2ff",x:80,y:40},{color:"#ff2",x:60,y:80}];for(var d=0;d<a.length;d++)b.fillStyle=a[d].color,b.beginPath(),b.arc(a[d].x,a[d].y,40,0,2*Math.PI,!0),b.closePath(),b.fill();b.fillStyle="#f9c";b.arc(60,60,60,0,2*Math.PI,!0);b.arc(60,60,20,0,2*Math.PI,!0);b.fill("evenodd")}
var m=a.callback,r=a.ediDataObject,n=a.timingDataObject;a=a.options;var k=this,p=(new Date).getTime();k.startFPTimer();try{d(b,a.renderText,a.renderGeometry)}catch(q){this.sendScriptError(q),m()}};this.createTouchSupportFp=function(a){try{var b=0;void 0!==navigator.maxTouchPoints?b=navigator.maxTouchPoints:void 0!==navigator.msMaxTouchPoints&&(b=navigator.msMaxTouchPoints);try{document.createEvent("TouchEvent");var d=!0}catch(B){d=!1}var c=b;var e=d;var f="ontouchstart"in window;a.touchSupport={maxTouchPoints:c,
touchEvent:e,touchStart:f}}catch(B){this.sendScriptError(B)}};this.createColorGamutFp=function(a){try{var b={srgb:window.matchMedia("(color-gamut: srgb)").matches,p3:window.matchMedia("(color-gamut: p3)").matches,rec2020:window.matchMedia("(color-gamut: rec2020)").matches},d;for(d in b)if(b[d]){b=d;break}a.colorGamut="object"!==typeof b?b:""}catch(l){this.sendScriptError(l)}};this.createMotionFp=function(a){try{a.motionPreferred=!window.matchMedia("(prefers-reduced-motion: no-preference)").matches}catch(b){this.sendScriptError(b)}};
this.createSampleRateFp=function(a){try{if(window.AudioContext||window.webkitAudioContext){var b=new (window.AudioContext||window.webkitAudioContext);a.sampleRate={sampleRate:b.sampleRate,maxChannelCount:b.destination.maxChannelCount,outputLatency:b.outputLatency}}else a.sampleRate={sampleRate:0,maxChannelCount:0,outputLatency:0}}catch(h){this.sendScriptError(h)}};this.createMathCalculationsFP=function(a){try{var b=function(){return 0},d=function(a){return a?a:0},c=Math.acosh||b,e=Math.asin||b,f=
Math.asinh||b,g=Math.atanh||b,m=Math.atan||b,r=Math.sin||b,n=Math.sinh||b,k=Math.cos||b,p=Math.cosh||b,q=Math.tan||b,v=Math.tanh||b,w=Math.exp||b,t=Math.expm1||b,u=Math.log1p||b,A={acos:d((Math.acos||b)(.12312423423423424)),acosh:d(c(1E308)),asin:d(e(.12312423423423424)),asinh:d(f(1)),atanh:d(g(.5)),atan:d(m(.5)),sin:d(r(-1E300)),sinh:d(n(1)),cos:d(k(10.000000000123)),cosh:d(p(1)),tan:d(q(-1E300)),tanh:d(v(1)),exp:d(w(1)),expm1:d(t(1)),log1p:d(u(10)),powPI:d(Math.pow(Math.PI,-100)),acoshPf:d(Math.log(1E154+
Math.sqrt(1E154*1E154-1))),asinhPf:d(Math.log(1+Math.sqrt(2))),atanhPf:d(Math.log(3)/2),sinhPf:d(Math.exp(1)-1/Math.exp(1)/2),coshPf:d((Math.exp(1)+1/Math.exp(1))/2),expm1Pf:d(Math.exp(1)-1),tanhPf:d((Math.exp(2)-1)/(Math.exp(2)+1)),log1pPf:d(Math.log(11))};b=0;for(var D in A)b+=A[D]||0;a.math="number"===typeof b?b:0}catch(E){a.math=0,this.sendScriptError(E)}};this.createArchitectureFP=function(a){try{var b=new Float32Array(1),d=new Uint8Array(b.buffer);b[0]=Infinity;b[0]-=b[0];a.architecture=d[3]}catch(l){this.sendScriptError(l)}};
this.createTransparencyFP=function(a){a.IsTransparencyPreferred=window.matchMedia("(prefers-reduced-transparency)").matches};this.createMonochromaticFP=function(a){a.isMonochromatic=window.matchMedia("(monochrome)").matches};this.createDynamicContrastFP=function(a){a.isHDREnabled=window.matchMedia("(dynamic-range: high)").matches};this.runMediaDeviceInfoFp=function(a){var b=a.callback,d=a.ediDataObject,c=a.timingDataObject,e=a.testInfo,f=a.testCount,g=this,m=(new Date).getTime();this.startFPTimer();
if(navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices)try{navigator.mediaDevices.enumerateDevices().then(function(a){if(e){d.mediaDeviceInfo=[];for(var l=0;l<a.length;l++)d.mediaDeviceInfo.push({deviceId:a[l].deviceId,groupId:a[l].groupId,kind:a[l].kind,label:a[l].label});d.mediaDeviceInfo=g.sortByProperty(d.mediaDeviceInfo,"kind","desc")}c.mediaDeviceInfoTime=(new Date).getTime()-m;c.mediaDeviceInfoTimeInt=g.stopFPTimer();if(f){l=[];for(var h=0;h<a.length;h++){for(var r=!1,z=0;z<l.length;z++)l[z].type===
a[h].kind&&(r=!0,l[z].count++);r||l.push({type:a[h].kind,count:1})}a=g.sortByProperty(l,"type","desc");d.mediaDeviceInfoCount=a}b()})}catch(r){b(),this.sendScriptError(r)}};this.createAudioFp=function(a,b,c,e){var d=!1,f=!0,l,h=setTimeout(function(){t.removeEventListener("complete",v);l&&clearTimeout(l);k(-2)},4E3);try{var g=this,m,k=function(f){d||(d=!0,c["audioFp"+a]=f,e["audioFp"+a]=(new Date).getTime()-m,e["audioFp"+a+"Int"]=g.stopFPTimer(),b())},p=function(){var a=0;try{m=(new Date).getTime(),
g.startFPTimer(),a++,3<a&&k(-1),t.startRendering(),f&&(f=!1,q())}catch(E){b(),g.sendScriptError(E)}},q=function(){"suspended"===t.state&&(l=setTimeout(function(){p()},500))},v=function(a){try{clearTimeout(h);var d=0,c=a.renderedBuffer.getChannelData(0).subarray(4500);for(a=0;a<c.length;++a)d+=Math.abs(c[a]);k(d)}catch(G){b(),g.sendScriptError(G)}},w=window.OfflineAudioContext||window.webkitOfflineAudioContext;if(w){var t=new w(1,5E3,44100),u=t.createOscillator();u.type=a;u.frequency.value=1E4;var A=
t.createDynamicsCompressor();A.threshold.value=-50;A.knee.value=40;A.ratio.value=12;A.attack.value=0;A.release.value=.25;u.connect(A);A.connect(t.destination);u.start(0);t.addEventListener("complete",v);p()}else k(-2)}catch(D){b(),this.sendScriptError(D)}};this.msieDetect=function(a){try{var b=new ActiveXObject(a);try{return b.GetVariable("$version")}catch(l){try{return b.GetVersions()}catch(z){try{var d;for(a=1;9>a;a++)b.isVersionSupported(a+".0")&&(d=a);return d||!0}catch(C){return!0}}}}catch(l){return!1}};
this.CreateCanvasFP=function(){var a=document.createElement("canvas");if(a.getContext&&a.getContext("2d")){a.width=250;a.height=250;for(var b=a.getContext("2d"),c=0;c<a.width/2;c++)b.moveTo(2*c,0),b.lineTo(4*c,a.height),b.strokeStyle="rgba(0, 0, 0, 0.1)",b.stroke();b.font="40px 'Arial'";for(c=0;3>c;c++)b.fillStyle="#41b4e7",b.fillText("Dotmetrics",10,50*c+75),b.fillStyle="rgba(255, 255, 255, 0.7)",b.fillText("Dotmetrics",20,50*c+75);a=a.toDataURL("image/jpeg",1);return this.SHA1(a).toString()}return null};
this.runHasLocalStorageFp=function(a){a.hasLocalStorage=this.lsAvailable()};this.runBluetoothAPI=function(a){a.bluetoothAPI=window.navigator.bluetooth?!0:!1};this.createWebglFP=function(a,b,c){for(var d=0;d<c.length;d++){var e=c[d],f=e.numTriangles,g=e.vertexData,h=e.colorData;e=e.imageName;var m=(new Date).getTime();var n=document.createElement("canvas");n.width=256;n.height=128;var k=n.getContext("webgl2")||n.getContext("experimental-webgl2")||n.getContext("webgl")||n.getContext("experimental-webgl")||
n.getContext("moz-webgl");var p=null;try{var q=k.createBuffer();k.bindBuffer(k.ARRAY_BUFFER,q);var v=new Float32Array(g);k.bufferData(k.ARRAY_BUFFER,v,k.STATIC_DRAW);q.itemSize=3;q.numItems=f;var w=new Float32Array(h),t=k.createBuffer();k.bindBuffer(k.ARRAY_BUFFER,t);k.bufferData(k.ARRAY_BUFFER,w,k.STATIC_DRAW);t.itemSize=3;t.numItems=f;var u=k.createProgram(),A=k.createShader(k.VERTEX_SHADER);k.shaderSource(A,"attribute vec3 attrVertex;attribute vec3 color;varying vec3 vColor;void main(){gl_Position=vec4(attrVertex,1);vColor=color;}");
k.compileShader(A);var D=k.createShader(k.FRAGMENT_SHADER);k.shaderSource(D,"precision mediump float;varying vec3 vColor;void main(){gl_FragColor=vec4(vColor,1);}");k.compileShader(D);k.attachShader(u,A);k.attachShader(u,D);k.linkProgram(u);k.useProgram(u);k.bindBuffer(k.ARRAY_BUFFER,q);u.vertexPosAttrib=k.getAttribLocation(u,"attrVertex");u.offsetUniform=k.getUniformLocation(u,"uniformOffset");k.enableVertexAttribArray(u.vertexPosArray);k.vertexAttribPointer(u.vertexPosAttrib,q.itemSize,k.FLOAT,
!1,0,0);k.uniform2f(u.offsetUniform,1,1);k.bindBuffer(k.ARRAY_BUFFER,t);var E=k.getAttribLocation(u,"color");k.enableVertexAttribArray(E);k.vertexAttribPointer(E,t.itemSize,k.FLOAT,!1,0,0);k.drawArrays(k.TRIANGLES,0,3*q.numItems);var L=n.toDataURL("image/jpeg",1);p=this.SHA1(L).toString()}catch(G){}f=(new Date).getTime();a["webglFp"+e]=p;b["webglFp"+e]=f-m}};this.createDomainFontFP=function(a,b,c){var d=a.resultProperty,e=a.testFonts,f=a.callback,g=this.createFontTestIframe();try{g.onload=function(){function a(a){var b=
g.contentDocument.createElement("span");b.style="position: absolute; top: 0; left: 0; font-family: "+a+";";b.textContent="thequickbrownfoxjumpsoverthelazydogTHEQUICKBROWNFOXJUMPSOVERTHELAZYDOG0123456789#&!?";h.appendChild(b);return b}var c=["monospace","sans-serif","serif"],l=g.contentDocument.body;l.style.fontSize="72px";var h=g.contentDocument.createElement("div");h.style.setProperty("visibility","hidden","important");var m={},p={},z=function(){for(var b={},d=0;d<c.length;d++)b[c[d]]=a(c[d]);return b}(),
C=function(){for(var b={},d=0;d<e.length;d++)b[e[d]]=c.map(function(b){return a(e[d]+","+b)});return b}();l.appendChild(h);setTimeout(function(){for(var a=0;a<c.length;a++)m[c[a]]=z[c[a]].offsetWidth,p[c[a]]=z[c[a]].offsetHeight;var l="";for(a=0;a<e.length;a++){for(var h=C[e[a]],k=!1,n=0;n<c.length;n++)if(h[n].offsetWidth!==m[c[n]]||h[n].offsetHeight!==p[c[n]])k=!0;l+=k?"1":"0"}"1"===l[l.length-1]&&(b.unstable=!0);b[d]=l;document.body.removeChild(g);f()},0)}}catch(K){this.sendScriptError(K),document.body.removeChild(g)}};
this.createForcedColorsFP=function(a,b){var d=(new Date).getTime(),c=window.matchMedia("(forced-colors: active)").matches,e=(new Date).getTime();a.forcedColors=c;b.forcedColors=e-d};this.createFontTestIframe=function(){var a=document.createElement("iframe");a.style.display="block !important";a.style.position="absolute";a.style.top="0";a.style.left="0";a.style.visibility="hidden";a.srcdoc='<!doctype html><html><head><meta name="viewport" content="width=device-width, initial-scale=1">';document.body.appendChild(a);
return a};var f=0,g=null,m=100;this.startFPTimer=function(){f=0;g=setInterval(function(){f+=m},m)};this.stopFPTimer=function(){clearInterval(g);return f};this.getNetworkInformation=function(){var a=null;try{if("undefined"!==typeof window.navigator.connection){var b=window.navigator.connection;a={et:b.effectiveType,dl:b.downlink,dlm:b.downlinkMax,rtt:b.rtt,sd:b.saveData,t:b.type}}}catch(h){this.sendScriptError(h)}return a};this.CreateElement=function(a,b,c){if(null!=a){a=document.createElement(a);
if(null!=b)for(var d in b)"function"==typeof b[d]?this.addEventSimple(a,d,b[d]):(a.setAttribute(d,b[d]),"class"==d&&this.isIE()&&(a.className=b[d]));null!=c&&(b=document.createTextNode(c.toString()),a.appendChild(b));return a}return null!=c?document.createTextNode(c.toString()):null};this.encode=function(a){var b="",d=0;for(a=this.utf8Encode(a);d<a.length;){var c=a.charCodeAt(d++);var e=a.charCodeAt(d++);var f=a.charCodeAt(d++);var g=c>>2;c=(c&3)<<4|e>>4;var m=(e&15)<<2|f>>6;var p=f&63;isNaN(e)?m=
p=64:isNaN(f)&&(p=64);b=b+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(g)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(c)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(m)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(p)}return b};this.utf8Encode=function(a){a=a.replace(/\r\n/g,"\n");for(var b="",d=0;d<a.length;d++){var c=a.charCodeAt(d);128>c?b+=String.fromCharCode(c):(127<c&&2048>
c?b+=String.fromCharCode(c>>6|192):(b+=String.fromCharCode(c>>12|224),b+=String.fromCharCode(c>>6&63|128)),b+=String.fromCharCode(c&63|128))}return b};this.SHA1=function(a){function b(a,b){return a<<b|a>>>32-b}function c(a){var b="",d;for(d=7;0<=d;d--){var c=a>>>4*d&15;b+=c.toString(16)}return b}var d,e=Array(80),f=1732584193,g=4023233417,m=2562383102,p=271733878,n=3285377520;a=function(a){a=a.replace(/\r\n/g,"\n");for(var b="",d=0;d<a.length;d++){var c=a.charCodeAt(d);128>c?b+=String.fromCharCode(c):
(127<c&&2048>c?b+=String.fromCharCode(c>>6|192):(b+=String.fromCharCode(c>>12|224),b+=String.fromCharCode(c>>6&63|128)),b+=String.fromCharCode(c&63|128))}return b}(a);var k=a.length;var y=[];for(d=0;d<k-3;d+=4){var q=a.charCodeAt(d)<<24|a.charCodeAt(d+1)<<16|a.charCodeAt(d+2)<<8|a.charCodeAt(d+3);y.push(q)}switch(k%4){case 0:d=2147483648;break;case 1:d=a.charCodeAt(k-1)<<24|8388608;break;case 2:d=a.charCodeAt(k-2)<<24|a.charCodeAt(k-1)<<16|32768;break;case 3:d=a.charCodeAt(k-3)<<24|a.charCodeAt(k-
2)<<16|a.charCodeAt(k-1)<<8|128}for(y.push(d);14!=y.length%16;)y.push(0);y.push(k>>>29);y.push(k<<3&4294967295);for(a=0;a<y.length;a+=16){for(d=0;16>d;d++)e[d]=y[a+d];for(d=16;79>=d;d++)e[d]=b(e[d-3]^e[d-8]^e[d-14]^e[d-16],1);q=f;k=g;var v=m;var w=p;var t=n;for(d=0;19>=d;d++){var u=b(q,5)+(k&v|~k&w)+t+e[d]+1518500249&4294967295;t=w;w=v;v=b(k,30);k=q;q=u}for(d=20;39>=d;d++)u=b(q,5)+(k^v^w)+t+e[d]+1859775393&4294967295,t=w,w=v,v=b(k,30),k=q,q=u;for(d=40;59>=d;d++)u=b(q,5)+(k&v|k&w|v&w)+t+e[d]+2400959708&
4294967295,t=w,w=v,v=b(k,30),k=q,q=u;for(d=60;79>=d;d++)u=b(q,5)+(k^v^w)+t+e[d]+3395469782&4294967295,t=w,w=v,v=b(k,30),k=q,q=u;f=f+q&4294967295;g=g+k&4294967295;m=m+v&4294967295;p=p+w&4294967295;n=n+t&4294967295}u=c(f)+c(g)+c(m)+c(p)+c(n);return u.toLowerCase()};this.sendMessageToExtension=function(a,b){window.sendMessageToDotmetricsExtension&&window.sendMessageToDotmetricsExtension(a,b)};this.postMessage=function(a,b){try{"undefined"!=typeof b?b.postMessage(a,"*"):window.postMessage(a,"*")}catch(h){}};
var p=!1;this.sendScriptError=function(a){p||(p=!0,this.performAjaxPost(this.baseUrlPrefix+this.dmURLs.ErrorEventUrl,{type:"script",ecid:this.SettingsObject.EventChainId,details:{},name:a&&a.name?a.name:"",message:a&&a.message?a.message:"",stack:a&&a.stack?a.stack:"",sectionId:this.SettingsObject.SiteSectionId,pageUrl:window.location.href}))};this.findMedian=function(a){a.sort(function(a,b){return a-b});var b=Math.floor(a.length/2);return 0===a.length%2?(a[b-1]+a[b])/2:a[b]};this.calculateMADMedian=
function(a){for(var b=this.findMedian(a),c=[],d=0;d<a.length;d++)c.push(Math.abs(a[d]-b));return this.findMedian(c)}}var F=new function(){this.SettingsObject=window.DotMetricsSettings;this.boundBeacon=navigator.sendBeacon.bind(navigator);this.Core=new I(this.SettingsObject);this.EnterPageEventData=null;this.TimeOnPage=0;this.LastSentTimeOnPage=-1;this.TimeBuffer=0;this.TimeTreshold=18E5;this.surveyLink=this.LoadTimeStamp="";this.DeviceGuidId=this.UserId=this.DeviceId=null;this.deviceInfoSent=!1;this.postIndex=
0;this.surveyDone=this.Done=!1;this.ajaxTimer=null;this.panel=!1;this.panelHouseholdId=this.panelUserId=null;this.videos={};this.foundVideoPlayers=[];this.SaveTimeOnPageInterval=1E4;this.MaxTimeOnPageItemsInLocalStorage=32;this.lastInteraction=this.saveTimeOnPageIntervalFunctionId=this.timeBufferIntervalInstanceId=null;this.domainCookie=this.SettingsObject.DomainCookieData.value;this.domainCookieTs=this.SettingsObject.DomainCookieData.ts;this.domainCookieChanged=this.SettingsObject.DomainCookieData.changed;
this.domainFPHKey="DotmetricsDomainFPH";this.domainFph=this.domainFphObject=null;this.Start=function(){var a=this;if("https://"===String(a.Core.baseUrlPrefix).slice(0,8))try{this.domainFphObject=this.getDomainFpObjectFromStorage();this.domainFph=null==this.domainFphObject?"":this.domainFphObject.dfph;document.addEventListener("visibilitychange",function(){try{if("hidden"===document.visibilityState){a.stopIntervalFunctions();a.emptyTimeBuffer();var c=a.SendTimeOnPageBeacon();a.SaveTimeOnPage(c)}else"visible"===
document.visibilityState&&a.startIntervalFunctions()}catch(f){a.Core.sendScriptError(f)}});a.startIntervalFunctions();this.initPanelElements();this.initInteractionEvents();this.listenForExtensionMessages();var e=this.createStartData();a.Core.sendData(this.Core.baseUrlPrefix+this.Core.dmURLs.DataUrl,e);if(window.dm)this.onAjaxDataUpdate();1==this.SettingsObject.VideoTrackingEnabled&&this.trackVideos()}catch(c){a.Core.sendScriptError(c)}};this.listenForExtensionMessages=function(){var a=this;window.addEventListener("message",
function(e){e.data.source&&"dotmetrics-extension"==e.data.source&&e.data.type&&a.handleExtensionRequest(e.data.type,e.source)})};this.handleExtensionRequest=function(a,e){switch(a){case "timeOnPage":a=this.createCurrentTimeOnPageObject();var c=this.getTimeOnPageDataTemplate();c.ep.push(a);this.Core.sendMessageToExtension({target:"dotmetrics-extension",type:"timeOnPage",data:c},e);break;case "getEnterPageData":this.EnterPageEventData&&(c=JSON.parse(JSON.stringify(this.EnterPageEventData)),c.ecid=this.SettingsObject.EventChainId,
c.dc=this.domainCookie,c.dfp=this.domainFph,this.Core.postMessage({target:"dotmetrics-plugin",type:"enterPageData",data:c},e));break;case "getDeviceInfo":var f=this;this.Core.createClientInfo(function(){var a={deviceInfo:f.Core.clientInfo,deviceHash:f.Core.SHA1(DotmetricsJSON.stringify(f.Core.clientInfo)),clientInfoTimingData:f.Core.clientInfoTimingData};f.Core.postMessage({target:"dotmetrics-extension",type:"deviceInfo",data:a},e)});break;case "generateDiData":f=this,window.console.log("generating di data"),
this.Core.runDomainFP(function(a){window.console.log("postMessage di data",a);f.Core.postMessage({target:"dotmetrics-extension",type:"diData",data:a},e)})}};this.createStartData=function(){var a=(new Date).getTimezoneOffset();a={id:this.SettingsObject.SiteSectionId,fl:!0,dom:window.location.hostname,lso:null,url:window.location.href,rurl:window.document.referrer,ecid:this.SettingsObject.EventChainId,dc:this.domainCookie,dfph:this.domainFph,tzOffset:a};this.panel&&(a.hhid=this.panelHouseholdId,a.uid=
this.panelUserId);var e="DM_SitId"+this.SettingsObject.SiteId,c="DM_SitIdT"+this.SettingsObject.SiteId,f=e+"SecId"+this.SettingsObject.SiteSectionId,g=e+"SecIdT"+this.SettingsObject.SiteSectionId,m=this.Core.getFromLocalStorage("DotmetricsSiteData");try{m=m?DotmetricsJSON.parse(m):{}}catch(b){m={}}var p=(new Date).getTime()-18E5;for(d in m)m[d]<p&&delete m[d];this.Core.hasCookie(e)&&m.hasOwnProperty(c)?a.oss=!1:(this.Core.setCookie(e,"1"),a.oss=!0);this.Core.hasCookie(f)&&m.hasOwnProperty(g)?a.oses=
!1:(this.Core.setCookie(f,"1"),a.oses=!0);var d=(new Date).getTime();m[c]=d;m[g]=d;c={DotmetricsSiteData:JSON.stringify(m)};this.Core.saveInLocalStorage(c);return a};this.processActions=function(a){try{var e=this,c=(new Date).getTimezoneOffset(),f={id:this.SettingsObject.SiteSectionId,fl:!1,dom:window.location.hostname,lso:null,ds:null,dsl:null,dh:null,url:window.location.href,rurl:window.document.referrer,ecid:this.SettingsObject.EventChainId,dc:this.domainCookie,dfph:this.domainFph,tzOffset:c};
this.panel&&(f.hhid=this.panelHouseholdId,f.uid=this.panelUserId);c=!1;if(a.SendDeviceInfo||a.Ping){var g={deviceInfo:!1,pings:0,exitPageData:!1};a.Ping&&0<a.Ping&&0==this.deviceInfoSent&&(g.pings=a.Ping);a.SendDeviceInfo&&0==this.deviceInfoSent&&(this.deviceInfoSent=g.deviceInfo=!0);this.submitData(g)}if(a.Survey&&a.Survey.SurveyUrl)if(this.Survey=a.Survey,this.Survey.Mobile){var m=this;this.anchor=this.Core.CreateElement("a",{href:a.Survey.SurveyUrl,style:"position:fixed; width:100%; height:100%; top:0; left:0; background:#f00; opacity:0;z-index:99999",
target:"_blank",id:"DotMetricsPopupLink"},null);document.body.appendChild(this.anchor);this.Core.addEventSimple(this.anchor,"click",function(a){try{a.preventDefault();var b=m.anchor.getAttribute("href"),c=m.anchor.parentElement;c&&c.removeChild(m.anchor);m.surveyDone||(m.surveyDone=!0,setTimeout(function(){window.open(b,"_blank")},20))}catch(r){m.Core.sendScriptError(r)}})}else{var p=function(){try{document.body.addEventListener?document.body.removeEventListener("click",p):document.body.detachEvent("onclick",
p),e.showSurvey()}catch(C){e.Core.sendScriptError(C)}};document.body.addEventListener?document.body.addEventListener("click",p,!1):document.body.attachEvent("onclick",p)}if(a.SendDeviceHash)if(this.Core.clientInfo){var d=DotmetricsJSON.stringify(this.Core.clientInfo),b=this.Core.SHA1(d);f.dh=b.toString();c=!0}else{this.Core.createClientInfo(function(){e.processActions(a)});return}a.PersistDeviceAndUser&&a.DeviceId&&a.UserId&&a.DeviceGuidId&&this.Core.saveInLocalStorage({DotMetricsDeviceId:a.DeviceId,
DotMetricsUserId:a.UserId,DotMetricsDeviceGuidId:a.DeviceGuidId});if(a.SendLSO){var h=this.Core.getFromLocalStorage("DotMetricsUserId"),l=this.Core.getFromLocalStorage("DotMetricsDeviceId"),z=this.Core.getFromLocalStorage("DotMetricsDeviceGuidId");f.lso=h&&l&&z?{d:l,u:h,dg:z}:{d:"",u:"00000000-0000-0000-0000-000000000000",dg:"00000000-0000-0000-0000-000000000000"};c=!0}c&&e.Core.sendData(e.Core.baseUrlPrefix+e.Core.dmURLs.DataUrl,f)}catch(C){this.Core.sendScriptError(C)}};this._timeData=[];this._pingRawData=
[];this._requestedPingsNum=this._currentRequestNum=0;this._onPingMeasurmentsDone=null;this._pingStartTime=0;this._pingPorcessRunning=!1;this._pingProcessQueue=[];this.measurePingTimes=function(a,e){try{if(1==this._pingPorcessRunning){var c=this;this._pingProcessQueue.push(function(){c.measurePingTimes(a,e)})}else this._pingPorcessRunning=!0,this._timeData=[],this._pingRawData=[],this._currentRequestNum=0,this._requestedPingsNum=a,this._onPingMeasurmentsDone=e,this.makePingRequest()}catch(f){this.Core.sendScriptError(f)}};
this.makePingRequest=function(){this._pingStartTime=(new Date).getTime();(0==this._timeData.length?{ctd:0,cl:0}:this._timeData[this._timeData.length-1]).ct=this._pingStartTime;this._pingRawData.push({ct:this._pingStartTime});this.Core.sendData(this.Core.baseUrlPrefix+this.Core.dmURLs.PingUrl,null)};this.HandlePing=function(a){try{var e=(new Date).getTime(),c=(e-this._pingStartTime)/2,f=this._pingStartTime-a.s-Math.abs(c),g={ctd:f,cl:c},m=this._pingRawData.length-1;this._pingRawData[m].cte=e;this._pingRawData[m].s=
a.s;this._pingRawData[m].ctd=f;this._pingRawData[m].cl=c;this._timeData.push(g);this._currentRequestNum++;if(this._currentRequestNum<this._requestedPingsNum)this.makePingRequest();else{for(var p=m=g=f=c=e=0,d=[],b=[],h=0;h<this._timeData.length;h++)e+=this._timeData[h].ctd,c+=this._timeData[h].cl,d.push(this._timeData[h].ctd),b.push(this._timeData[h].cl);e=Math.round(e/this._timeData.length);c=Math.round(c/this._timeData.length);f=Math.round(this.Core.findMedian(d));g=Math.round(this.Core.findMedian(b));
m=Math.round(this.Core.calculateMADMedian(d));p=Math.round(this.Core.calculateMADMedian(b));a={DeviceSync:e,DeviceSyncLag:c,DeviceSyncMedian:f,DeviceSyncLagMedian:g,DeviceSyncMAD:m,DeviceSyncLagMAD:p,raw:this._pingRawData};this._onPingMeasurmentsDone(a);this._pingPorcessRunning=!1;0<this._pingProcessQueue.length&&this._pingProcessQueue.shift()()}}catch(l){this.Core.sendScriptError(l)}};this.showSurvey=function(){this.surveyDone||(this.surveyDone=!0,window.open(this.Survey.SurveyUrl,"","width="+this.Survey.WindowWidth+
",height="+this.Survey.WindowHeight+",scrollbars=1").focus())};this.startIntervalFunctions=function(){var a=this;null==this.timeBufferIntervalInstanceId&&(this.timeBufferIntervalInstanceId=setInterval(function(){try{void 0!=document.visibilityState?"visible"==document.visibilityState&&a.TimeBuffer++:a.TimeBuffer++}catch(e){a.Core.sendScriptError(e)}},1E3));null==this.saveTimeOnPageIntervalFunctionId&&(this.saveTimeOnPageIntervalFunctionId=setInterval(function(){a.SaveTimeOnPage()},a.SaveTimeOnPageInterval))};
this.stopIntervalFunctions=function(){this.timeBufferIntervalInstanceId&&(clearInterval(this.timeBufferIntervalInstanceId),this.timeBufferIntervalInstanceId=null);this.saveTimeOnPageIntervalFunctionId&&(clearInterval(this.saveTimeOnPageIntervalFunctionId),this.saveTimeOnPageIntervalFunctionId=null)};this.emptyTimeBuffer=function(){try{(new Date).getTime()-this.lastInteraction.getTime()<=this.TimeTreshold&&(this.TimeOnPage+=this.TimeBuffer),this.TimeBuffer=0,this.lastInteraction=new Date}catch(a){this.Core.sendScriptError(a)}};
this.SendTimeOnPageBeacon=function(){if(this.LastSentTimeOnPage==this.TimeOnPage)return!0;if(navigator.sendBeacon&&this.EnterPageEventData){var a=this.createCurrentTimeOnPageObject(),e=this.getTimeOnPageDataTemplate();e.ep.push(a);this.LastSentTimeOnPage=this.TimeOnPage;return this.Core.performSendBeacon(this.Core.baseUrlPrefix+this.Core.dmURLs.BeaconUrl,e)}return!1};this.createCurrentTimeOnPageObject=function(){return{cd:this.EnterPageEventData.CreationDate,eid:this.EnterPageEventData.EventId,id:this.EnterPageEventData.SiteSectionId,
sop:this.TimeOnPage,vl:this.getVideoData(),url:window.location.href,rurl:window.document.referrer,ecid:this.SettingsObject.EventChainId,dc:this.domainCookie,dfph:this.domainFph}};this.getTimeOnPageDataTemplate=function(){var a=(new Date).getTimezoneOffset();a={id:this.SettingsObject.SiteSectionId,cd:{d:this.DeviceId,u:this.UserId,dg:this.DeviceGuidId},ep:[],tzOffset:a};this.panel&&(a.hhid=this.panelHouseholdId,a.uid=this.panelUserId);return a};this.SaveTimeOnPage=function(a){try{if(0!=this.Core.lsAvailable()&&
null!=this.EnterPageEventData){for(var e=this.getTimeOnPageData(),c=0;c<e.length;c++)if(e[c].eid==this.EnterPageEventData.EventId){e.splice(c,1);break}if(!a){var f=this.createCurrentTimeOnPageObject();e.push(f)}e.length>this.MaxTimeOnPageItemsInLocalStorage&&e.splice(0,e.length-this.MaxTimeOnPageItemsInLocalStorage);a={};a[this.SettingsObject.TimeOnPage]=DotmetricsJSON.stringify(e);this.Core.saveInLocalStorage(a)}}catch(g){this.Core.sendScriptError(g)}};this.processTimeOnPageData=function(){try{if(0==
this.Core.lsAvailable())return null;for(var a=[],e=this.getTimeOnPageData(),c=new Date,f=0;f<e.length;f++)try{var g=e[f],m=new Date(g.cd);864E5>c.getTime()-m.getTime()&&a.push(g)}catch(p){}0==a.length&&(a=null);this.Core.removeFromLocalStorage(this.SettingsObject.TimeOnPage);return a}catch(p){this.Core.sendScriptError(p)}};this.getTimeOnPageData=function(){try{var a=this.Core.getFromLocalStorage(this.SettingsObject.TimeOnPage),e=[];if(null!=a&&0<a.length)try{e=DotmetricsJSON.parse(a)}catch(c){e=JSON.parse(a)}return e}catch(c){return this.Core.sendScriptError(c),
[]}};this.initInteractionEvents=function(){this.lastInteraction=new Date;var a=this;this.Core.addEventSimple(document,"mousemove",function(){a.emptyTimeBuffer()});this.Core.addEventSimple(document,"wheel",function(){a.emptyTimeBuffer()});this.Core.addEventSimple(document,"touchend",function(){a.emptyTimeBuffer()})};this.initPanelElements=function(){if(document.getElementById("DotmetricsPanelUserId")&&document.getElementById("DotmetricsPanelHouseholdId")){this.panel=!0;this.panelUserId=document.getElementById("DotmetricsPanelUserId").value;
this.panelHouseholdId=document.getElementById("DotmetricsPanelHouseholdId").value;var a=document.createElement("input");a.setAttribute("type","hidden");a.setAttribute("id","DotmetricsScriptLoaded");a.setAttribute("value","true");document.getElementsByTagName("head")[0].appendChild(a)}};this.CreateIframe=function(){this.iFrameHolderDiv=this.Core.CreateElement("div",{id:"DotMetricsPF",style:"display:none;width:0px;height:0px;position:absolute; left:-2000px;"},null);var a="dotmetricsframe"+this.postIndex;
this.postIndex++;this.iFrameHolderDiv.style.display="none";try{this.iframe=document.createElement('<iframe name="'+a+'" style:"display:none;width:0px;height:0px;">')}catch(e){this.iframe=this.Core.CreateElement("iframe",{name:a,id:a,style:"display:none;width:0px;height:0px;"},null)}this.iframe.id=a;this.form=this.Core.CreateElement("form",{action:this.Core.baseUrlPrefix+this.Core.dmURLs.PostUrl,method:"post",target:a,id:"DotMetricsForm"},null);this.formInput=this.Core.CreateElement("input",{type:"text",
name:"v"},null);document.body.appendChild(this.iFrameHolderDiv);this.iFrameHolderDiv.appendChild(this.iframe);this.iFrameHolderDiv.appendChild(this.form);this.form.appendChild(this.formInput);document.getElementById("DotMetricsForm").target=a};this.submitData=function(a){function e(){try{c.CreateIframe();c.formInput.value=DotmetricsJSON.stringify(g);c.form.submit();var a=c.iFrameHolderDiv;setTimeout(function(){document.body.removeChild(a)},5E3)}catch(p){c.Core.sendScriptError(p)}}var c=this;this.Core.formPostCount++;
if(!(this.Core.formPostCount>this.Core.callLimit)){var f=(new Date).getTimezoneOffset(),g={id:this.SettingsObject.SiteSectionId,cd:{d:this.DeviceId,u:this.UserId,dg:this.DeviceGuidId},di:null,ds:0,dsl:0,url:window.location.href,rurl:window.document.referrer,ecid:this.SettingsObject.EventChainId,dc:this.domainCookie,dfph:this.domainFph,tzOffset:f};this.panel&&(g.hhid=this.panelHouseholdId,g.uid=this.panelUserId);if(a.deviceInfo)if(this.Core.clientInfo)g.di=this.Core.clientInfo;else{this.Core.createClientInfo(function(){c.submitData(a)});
return}0<a.pings?this.measurePingTimes(a.pings,function(a){g.ds=a.DeviceSync;g.dsl=a.DeviceSyncLag;e()}):e()}};this.HandleJsonp=function(a){try{var e=this;e.Core.sendMessageToExtension({target:"dotmetrics-extension",type:"jsonpResponse",data:a,ecid:this.SettingsObject.EventChainId,dc:this.domainCookie,dfph:this.domainFph});this.UserId=a.UserId;this.DeviceId=a.DeviceId;this.DeviceGuidId=a.DeviceGuidId;window.DotMetricsObj.DeviceId=this.DeviceId;window.DotMetricsObj.UserId=this.UserId;this.deviceInfoSent&&
(a.SendDeviceInfo=!1,a.Ping=0);if(this.firstLoadDone)this.processActions(a);else{this.firstLoadDone=!0;this.EnterPageEventData=a.EnterPageEventData;window.DotMetricsObj.firstLoadDone=!0;window.DotMetricsObj.EnterPageEventData=a.EnterPageEventData;this.runDomainFPProcess();var c={deviceInfo:!1,pings:0};1==a.SendDeviceInfo&&0==this.deviceInfoSent&&(c.deviceInfo=!0,a.SendDeviceInfo=!1,this.deviceInfoSent=!0);a.Ping&&0<a.Ping&&(c.pings=a.Ping,a.Ping=!1);setTimeout(function(){try{(c.deviceInfo||c.pings)&&
e.submitData(c);var f=e.processTimeOnPageData();e.Core.setCookie(e.SettingsObject.TimeOnPage,null,0);if(f){var g=e.getTimeOnPageDataTemplate();g.ep=f;e.Core.performAjaxPost(e.Core.baseUrlPrefix+e.Core.dmURLs.BeaconUrl,g)}e.processActions(a)}catch(m){e.Core.sendScriptError(m)}},1E3*Math.random()+500)}}catch(f){this.Core.sendScriptError(f)}};this.getDomainFpObjectFromStorage=function(){try{var a=JSON.parse(this.Core.getFromLocalStorage(this.domainFPHKey))}catch(c){a=null}try{var e=JSON.parse(this.Core.getCookie(this.domainFPHKey))}catch(c){e=
null}return this.syncDomainFpObject(a,e)};this.syncDomainFpObject=function(a,e){var c=this.checkIfDomainFpValid(a),f=this.checkIfDomainFpValid(e),g=null;c&&f?g=a.time>e.time?a:e:c?g=a:f&&(g=e);null!=g&&(a=JSON.stringify(g),e={},e[this.domainFPHKey]=a,this.Core.saveInLocalStorage(e),this.Core.setCookie(this.domainFPHKey,a,365));return g};this.checkIfDomainFpValid=function(a){return"undefined"!=typeof a&&null!=a&&null!=a.dfph&&""!=a.dfph&&(40==a.dfph.length||0<a.dfph.indexOf("_unstable"))&&a.v&&a.time&&
a.niTime?!0:!1};this.runDomainFPProcess=function(){var a=!1;if(!(0==this.SettingsObject.DomainCookieEnabled||864E5>(new Date).getTime()-this.domainCookieTs)){var e=this.domainFphObject,c=e&&e.dfph?e.dfph:null;a=e&&e.time?e.time:0;a=e&&10!==e.v?!0:432E6<(new Date).getTime()-a;if(0==(1==this.domainCookieChanged||1==a||null==c))this.runDailyEdi(e);else{var f=this;this.Core.runDomainFP(function(a){try{var c={dfph:a.dfph,time:(new Date).getTime(),niTime:(new Date).getTime(),v:10},e={id:f.SettingsObject.SiteSectionId,
ecid:f.SettingsObject.EventChainId,eid:f.EnterPageEventData.EventId,dc:f.domainCookie,dfph:a.dfph};f.runNetworkMeasurements(function(d){e.ts=d.ts;e.ni=d.ni;f.Core.performFPPost(f.Core.baseUrlPrefix+f.Core.dmURLs.EdiUrl,e,function(b){try{"OK"==b?f.syncDomainFpObject(c):(e.dfp=a.dfp,e.td=a.timingData,f.Core.performFPPost(f.Core.baseUrlPrefix+f.Core.dmURLs.EdiUrl,e,function(a){"OK"==a&&f.syncDomainFpObject(c)}))}catch(h){f.Core.sendScriptError(h)}})})}catch(d){f.Core.sendScriptError(d)}})}}};this.runDailyEdi=
function(a){if(this.checkIfDomainFpValid(a)&&a.time&&a.niTime){var e=new Date,c=new Date(a.time),f=new Date(a.niTime);if(e.getDate()!=c.getDate()&&e.getDate()!=f.getDate()){var g=this;this.runNetworkMeasurements(function(c){1E3<c.ts.dlm||(g.Core.performFPPost(g.Core.baseUrlPrefix+g.Core.dmURLs.EdiDailyUrl,{id:g.SettingsObject.SiteSectionId,ecid:g.SettingsObject.EventChainId,eid:g.EnterPageEventData.EventId,dc:g.domainCookie,dfph:a.dfph,ts:c.ts,ni:c.ni}),a.niTime=(new Date).getTime(),g.syncDomainFpObject(a))})}}};
this.runNetworkMeasurements=function(a){var e=this;this.measurePingTimes(5,function(c){var f={};f.ts={dsa:c.DeviceSync,dsm:c.DeviceSyncMedian,dsmad:c.DeviceSyncMAD,dla:c.DeviceSyncLag,dlm:c.DeviceSyncLagMedian,dlmad:c.DeviceSyncLagMAD,raw:c.raw};f.ni=e.Core.getNetworkInformation();a(f)})};this.onAjaxDataUpdate=function(){try{var a=window.dm,e=this;"https://"===String(e.Core.baseUrlPrefix).slice(0,8)&&null==this.ajaxTimer&&"undefined"!=typeof a&&"undefined"!=typeof a.AjaxData&&0<a.AjaxData.length&&
(this.ajaxTimer=setTimeout(function(){try{e.cloneAjaxDataForStressTestScript(a.AjaxData);var c=e.prepareAjaxData(a.AjaxData);a.AjaxData.length=0;e.ajaxTimer=null;e.Core.performAjaxPost(e.Core.baseUrlPrefix+e.Core.dmURLs.AjaxEventUrl,c)}catch(f){e.Core.sendScriptError(f)}},this.SettingsObject.AjaxEventTimeout))}catch(c){this.Core.sendScriptError(c)}};this.cloneAjaxDataForStressTestScript=function(a){try{if("undefined"!=typeof window.DotMetricsObjStress){var e=JSON.parse(JSON.stringify(a));"undefined"==
typeof window.dmStress&&(window.dmStress={AjaxData:[]});for(a=0;a<e.length;a++)window.dmStress.AjaxData.push(e[a]);window.DotMetricsObjStress.onAjaxDataUpdate()}}catch(c){}};this.prepareAjaxData=function(a){var e=(new Date).getTimezoneOffset(),c={siteSectionId:this.SettingsObject.SiteSectionId,ecid:this.SettingsObject.EventChainId,dc:this.domainCookie,dfph:this.domainFph,domain:window.location.hostname,events:[],tzOffset:e};this.panel&&(c.hhid=this.panelHouseholdId,c.uid=this.panelUserId);var f=this;
a.forEach(function(a){var e={};e.eventType=a.et?a.et:"pageview";e.eventData=a.d?a.d:null;e.eventSiteSectionId=a.ssid?a.ssid:f.SettingsObject.SiteSectionId;isNaN(e.eventSiteSectionId)&&(e.eventTag=e.eventSiteSectionId,delete e.eventSiteSectionId);e.url=a.url?a.url:window.location.href;c.events.push(e)});return c};this.trackVideos=function(){var a=this;(new H(function(e,c,f){switch(e){case "flowPlayer":a.trackFP(f,e,c);break;case "jwPlayer":a.trackJW(f,e,c);break;case "videojs":a.trackVideoJS(f,e,c)}})).init()};
var y=!1;this.sendVideoError=function(a,e,c){if(!y){y=!0;var f={};c&&c.name&&(f.name=c.name);c&&c.message&&(f.message=c.message);c&&c.stack&&(f.stack=c.stack);this.Core.performAjaxPost(this.Core.baseUrlPrefix+this.Core.dmURLs.ErrorEventUrl,{type:"video",details:{player:a,playerVersion:e},error:f,sectionId:this.SettingsObject.SiteSectionId,pageUrl:window.location.href})}};this.trackFP=function(a,e,c){function f(){var b="";try{b=a.opts.title}catch(B){}return a.currentSrc+"_"+b}function g(){var c="";
try{c=a.opts.title}catch(r){}var e=Math.max(0,a.duration),g=f();p.videos[g]={vid:a.currentSrc,w:a.videoWidth,h:a.videoHeight,vdur:e,tw:0,ls:a.opts.live,t:c};b=d=null}function m(b){a.off("loadedmetadata",h);a.off("seeked",l);a.off("timeupdate",z);p.sendVideoError(e,c,b)}var p=this,d=null,b=null,h=function(a){try{g()}catch(B){m(B)}},l=function(c){try{d=a.currentTime,b=(new Date).getTime()}catch(B){m(B)}},z=function(c){try{if(d&&0==a.playerState["is-seeking"]){var e=a.currentTime-d,h=.001*((new Date).getTime()-
b);if(0<e){if(1<e)return;var l=f();p.videos[l]?(a.currentTime!=d&&0<h&&1>h&&(p.videos[l].tw+=h),p.videos[l].vdur<a.duration&&(p.videos[l].vdur=a.duration)):g()}}d=a.currentTime;b=(new Date).getTime()}catch(n){m(n)}};a.on("loadedmetadata",h);a.on("seeked",l);a.on("timeupdate",z)};this.trackJW=function(a,e,c){function f(){var b=a.getPlaylistItem();if("undefined"!=typeof b){var c=b.file+"_"+b.title;if(!m.videos[c]){var e=a.getConfig?a.getConfig():void 0;m.videos[c]={vid:b.file,w:a.getWidth(),h:a.getHeight(),
vdur:a.getDuration(),tw:0,ls:e?e&&"Live"==e.streamType:!1,t:b.title};0>m.videos[c].vdur&&(m.videos[c].vdur=0)}p=a.getPosition();d=(new Date).getTime()}}function g(d){a.off&&(a.off("play",b),a.off("seek",h),a.off("time",l));m.sendVideoError(e,c,d)}var m=this,p=null,d=null,b=function(a){try{f()}catch(C){g(C)}},h=function(a){try{p=a.offset}catch(C){g(C)}},l=function(b){try{if(p){var c=.001*((new Date).getTime()-d),e=a.getPlaylistItem();if("undefined"==typeof e)return;var h=e.file+"_"+e.title;"undefined"==
typeof m.videos[h]&&f();b.position!=p&&0<c&&1>c&&(m.videos[h].tw+=c);m.videos[h].h||(m.videos[h].h=a.getHeight());m.videos[h].w||(m.videos[h].w=a.getWidth());if(!m.videos[h].vdur||m.videos[h].vdur<a.getDuration())m.videos[h].vdur=a.getDuration()}p=b.position;d=(new Date).getTime()}catch(r){g(r)}};a.on?(a.on("play",b),a.on("seek",h),a.on("time",l)):(a.onPlay(b),a.onSeek(h),a.onTime(l))};this.trackVideoJS=function(a,e,c){function f(){var b=a.mediainfo?a.mediainfo.name:"";return a.currentSrc()+"_"+b}
function g(){var c=a.currentSrc();if(""!=c){var e=f();p.videos[e]||(p.videos[e]={vid:c,w:"function"==typeof a.videoWidth?a.videoWidth():a.width(),h:"function"==typeof a.videoHeight?a.videoHeight():a.height(),vdur:a.duration(),tw:0,ls:!1,t:a.mediainfo?a.mediainfo.name:""},0>p.videos[e].vdur&&(p.videos[e].vdur=0),b=d=null)}}function m(b){a.off("loadedmetadata",h);a.off("timeupdate",l);p.sendVideoError(e,c,b)}var p=this,d=null,b=null,h=function(){try{g()}catch(z){m(z)}},l=function(){try{if(d&&0==a.seeking()&&
("function"==typeof a.scrubbing?0==a.scrubbing():1)){var c=.001*((new Date).getTime()-b);if(""==a.currentSrc())return;var e=f();if("undefined"==typeof p.videos[e]){g();return}try{p.videos[e].ls=p.videos[e].ls||"undefined"!=a.liveTracker&&a.liveTracker.isLive&&a.liveTracker.isLive()}catch(B){}p.videos[e].vdur<a.duration()&&(p.videos[e].vdur=a.duration());a.currentTime()!=d&&0<c&&1>c&&(p.videos[e].tw+=c)}d=a.currentTime();b=(new Date).getTime()}catch(B){m(B)}};a.on("loadedmetadata",h);a.on("timeupdate",
l)};this.getVideoData=function(){var a=this.videos,e=[],c;for(c in a)if(a.hasOwnProperty(c)){var f=a[c];!f.vid||""==f.vid||0<=f.vid.indexOf("data:video")||(f.w=Math.round(f.w),f.h=Math.round(f.h),f.w||(f.w=0),f.h||(f.h=0),f.vdur&&isFinite(f.vdur)?(f.vdur=Math.round(f.vdur),0>f.vdur&&(f.vdur=0)):f.vdur=0,0<f.tw&&1>f.tw&&(f.tw=1),f.tw=Math.round(f.tw),0<f.tw&&e.push(f))}return e}};window.DotMetricsObj={onAjaxDataUpdate:function(){F.onAjaxDataUpdate()},HandleJsonp:function(y){F.HandleJsonp(y)},HandlePing:function(y){F.HandlePing(y)}};
top.location==self.location&&setTimeout(function(){F.Start()},100)})(window);
